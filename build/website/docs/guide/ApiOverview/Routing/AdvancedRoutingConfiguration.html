<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
                    <title>phpDocumentor</title>
    

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <base href="../../../">
    <link rel="icon" href="images/favicon.ico"/>
    <link rel="stylesheet" href="css/normalize.css">
    <link rel="stylesheet" href="css/base.css">
            <link rel="preconnect" href="https://fonts.gstatic.com">
        <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@100;200;300;400;600;700&display=swap" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:wght@400;600;700&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="css/template.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.0/css/all.min.css" integrity="sha256-ybRkN9dBjhcS2qrW1z+hfCxq+1aBdwyQM5wlQoQVt/0=" crossorigin="anonymous" />
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/themes/prism-okaidia.css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/plugins/line-numbers/prism-line-numbers.css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/plugins/line-highlight/prism-line-highlight.css">
                <script src="https://cdn.jsdelivr.net/npm/fuse.js@3.4.6"></script>
        <script src="https://cdn.jsdelivr.net/npm/css-vars-ponyfill@2"></script>
        <script src="js/template.js"></script>
        <script src="js/search.js"></script>
        <script defer src="js/searchIndex.js"></script>
    </head>
<body id="top">
    <header class="phpdocumentor-header phpdocumentor-section">
    <h1 class="phpdocumentor-title"><a href="" class="phpdocumentor-title__link">phpDocumentor</a></h1>
    <input class="phpdocumentor-header__menu-button" type="checkbox" id="menu-button" name="menu-button" />
    <label class="phpdocumentor-header__menu-icon" for="menu-button">
        <i class="fas fa-bars"></i>
    </label>
    <section data-search-form class="phpdocumentor-search">
    <label>
        <span class="visually-hidden">Search for</span>
        <svg class="phpdocumentor-search__icon" width="21" height="20" viewBox="0 0 21 20" fill="none" xmlns="http://www.w3.org/2000/svg">
            <circle cx="7.5" cy="7.5" r="6.5" stroke="currentColor" stroke-width="2"/>
            <line x1="12.4892" y1="12.2727" x2="19.1559" y2="18.9393" stroke="currentColor" stroke-width="3"/>
        </svg>
        <input type="search" class="phpdocumentor-field phpdocumentor-search__field" placeholder="Loading .." disabled />
    </label>
</section>

    <nav class="phpdocumentor-topnav">
    <ul class="phpdocumentor-topnav__menu">
        </ul>
</nav>
</header>

    <main class="phpdocumentor">
        <div class="phpdocumentor-section">
            <input class="phpdocumentor-sidebar__menu-button" type="checkbox" id="sidebar-button" name="sidebar-button" />
<label class="phpdocumentor-sidebar__menu-icon" for="sidebar-button">
    Menu
</label>
<aside class="phpdocumentor-column -three phpdocumentor-sidebar">
                    <section class="phpdocumentor-sidebar__category">
            <h2 class="phpdocumentor-sidebar__category-header">typo3-explained</h2>
                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="guide/Introduction/Index.html#introduction" class="">Introduction</a>
</h4>
    <ul class="phpdocumentor-list">
                    <li>
                <a href="guide/Introduction/Index.html#system-overview-1" class="">System Overview</a>
                
            </li>
                    <li>
                <a href="guide/Introduction/Index.html#a-basic-installation" class="">A basic installation</a>
                
            </li>
            </ul>

                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="guide/ApiOverview/Index.html#api-a-z" class="">API A-Z</a>
</h4>

                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="guide/CodingGuidelines/Index.html#cgl" class="">Coding Guidelines</a>
</h4>
    <ul class="phpdocumentor-list">
                    <li>
                <a href="guide/CodingGuidelines/Introduction.html#cgl-introduction" class="">Introduction</a>
                
            </li>
                    <li>
                <a href="guide/CodingGuidelines/CglPhp/Index.html#cgl-php" class="">PHP Coding Guidelines</a>
                
            </li>
                    <li>
                <a href="guide/CodingGuidelines/CglJavaScript/Index.html#cgl-javascript" class="">JavaScript Coding Guidelines</a>
                
            </li>
                    <li>
                <a href="guide/CodingGuidelines/CglTypeScript/Index.html#cgl-typescript" class="">TypeScript Coding Guidelines</a>
                
            </li>
                    <li>
                <a href="guide/CodingGuidelines/CglTypoScript/Index.html#cgl-typoscript" class="">TypoScript Coding Guidelines</a>
                
            </li>
                    <li>
                <a href="guide/CodingGuidelines/CglTsConfig.html#cgl-tsconfig" class="">TSconfig Coding Guidelines</a>
                
            </li>
                    <li>
                <a href="guide/CodingGuidelines/CglXliff/Index.html#cgl-xliff" class="">Xliff Coding Guidelines</a>
                
            </li>
                    <li>
                <a href="guide/CodingGuidelines/CglYaml.html#cgl-yaml" class="">Yaml Coding Guidelines</a>
                
            </li>
                    <li>
                <a href="guide/CodingGuidelines/CglRest/Index.html#cgl-rest" class="">reStructuredText (reST)</a>
                
            </li>
            </ul>

                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="guide/Configuration/Index.html#configuration" class="">Configuration</a>
</h4>
    <ul class="phpdocumentor-list">
                    <li>
                <a href="guide/Configuration/ConfigurationOverview.html#config-overview" class="">Configuration overview</a>
                
            </li>
                    <li>
                <a href="guide/Configuration/Glossary.html#configuration-classification" class="">Glossary</a>
                
            </li>
                    <li>
                <a href="guide/Configuration/ConfigurationFiles.html#configuration-files" class="">Configuration files</a>
                
            </li>
                    <li>
                <a href="guide/Configuration/ConfigurationModule/Index.html#configuration-module" class="">Configuration module</a>
                
            </li>
                    <li>
                <a href="guide/Configuration/FeatureToggles.html#feature-toggles" class="">Feature toggles</a>
                
            </li>
                    <li>
                <a href="guide/Configuration/GlobalVariables.html#globals-variables" class="">$GLOBALS</a>
                
            </li>
                    <li>
                <a href="guide/Configuration/Typo3ConfVars/Index.html#typo3-conf-vars" class="">TYPO3_CONF_VARS</a>
                
            </li>
                    <li>
                <a href="guide/Configuration/Typo3Information.html#typo3Information" class="">Global meta information about TYPO3</a>
                
            </li>
                    <li>
                <a href="guide/Configuration/Tsconfig.html#tsconfig" class="">TSconfig</a>
                
            </li>
                    <li>
                <a href="guide/Configuration/TypoScriptSyntax/Index.html#typoscript-syntax-about" class="">TypoScript syntax</a>
                
            </li>
                    <li>
                <a href="guide/Configuration/UserSettingsConfiguration/Index.html#user-settings" class="">User settings configuration</a>
                
            </li>
                    <li>
                <a href="guide/Configuration/Yaml/Index.html#yaml" class="">YAML</a>
                
            </li>
            </ul>

                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="guide/ExtensionArchitecture/Index.html#extension-development" class="">Extension development</a>
</h4>
    <ul class="phpdocumentor-list">
                    <li>
                <a href="guide/ExtensionArchitecture/Concepts/Index.html#extension-concepts" class="">Concepts</a>
                
            </li>
                    <li>
                <a href="guide/ExtensionArchitecture/FileStructure/Index.html#extension-reserved-folders-legacy" class="">File structure</a>
                
            </li>
                    <li>
                <a href="guide/ExtensionArchitecture/HowTo/Index.html#extension-howto" class="">Howto</a>
                
            </li>
                    <li>
                <a href="guide/ExtensionArchitecture/Extbase/Index.html#extbase" class="">Extbase</a>
                
            </li>
                    <li>
                <a href="guide/ExtensionArchitecture/BestPractises/Index.html#extension-Best-practises" class="">Best practises and conventions</a>
                
            </li>
                    <li>
                <a href="guide/ExtensionArchitecture/Tutorials/Index.html#extension-tutorials" class="">Tutorials</a>
                
            </li>
            </ul>

                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="guide/Security/Index.html#security" class="">Security guidelines</a>
</h4>
    <ul class="phpdocumentor-list">
                    <li>
                <a href="guide/Security/Introduction/Index.html#security-introduction" class="">Introduction</a>
                
            </li>
                    <li>
                <a href="guide/Security/SecurityTeam/Index.html#security-team" class="">The TYPO3 Security Team</a>
                
            </li>
                    <li>
                <a href="guide/Security/GeneralInformation/Index.html#security-general-information" class="">General Information</a>
                
            </li>
                    <li>
                <a href="guide/Security/TypesOfThreats/Index.html#security-threats" class="">Types of Security Threats</a>
                
            </li>
                    <li>
                <a href="guide/Security/GeneralGuidelines/Index.html#security-general-guidelines" class="">General guidelines</a>
                
            </li>
                    <li>
                <a href="guide/Security/GuidelinesAdministrators/Index.html#security-administrators" class="">Guidelines for System Administrators</a>
                
            </li>
                    <li>
                <a href="guide/Security/GuidelinesExtensionDevelopment/Index.html#security-extension-development" class="">Guidelines for extension development</a>
                
            </li>
                    <li>
                <a href="guide/Security/GuidelinesIntegrators/Index.html#security-integrators" class="">Guidelines for TYPO3 integrators</a>
                
            </li>
                    <li>
                <a href="guide/Security/GuidelinesEditors/Index.html#security-editors" class="">Guidelines for editors</a>
                
            </li>
                    <li>
                <a href="guide/Security/Backups/Index.html#security-backups" class="">Backup strategy</a>
                
            </li>
                    <li>
                <a href="guide/Security/HackedSite/Index.html#security-detect-analyze-repair" class="">Detect, analyze and repair a hacked site</a>
                
            </li>
            </ul>

                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="guide/Testing/Index.html#testing" class="">Testing</a>
</h4>
    <ul class="phpdocumentor-list">
                    <li>
                <a href="guide/Testing/History.html#testing-history" class="">History</a>
                
            </li>
                    <li>
                <a href="guide/Testing/CoreTesting.html#testing-core" class="">Core testing</a>
                
            </li>
                    <li>
                <a href="guide/Testing/ExtensionTesting.html#testing-extensions" class="">Extension testing</a>
                
            </li>
                    <li>
                <a href="guide/Testing/ProjectTesting.html#testing-projects" class="">Project testing</a>
                
            </li>
                    <li>
                <a href="guide/Testing/WritingUnit.html#testing-writing-unit" class="">Writing unit tests</a>
                
            </li>
                    <li>
                <a href="guide/Testing/WritingFunctional.html#testing-writing-functional" class="">Writing functional tests</a>
                
            </li>
                    <li>
                <a href="guide/Testing/WritingAcceptance.html#testing-writing-acceptance" class="">Writing acceptance tests</a>
                
            </li>
                    <li>
                <a href="guide/Testing/Faq.html#testing-faq" class="">FAQ</a>
                
            </li>
            </ul>

                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="guide/About.html#about" class="">About This Manual</a>
</h4>
    <ul class="phpdocumentor-list">
                    <li>
                <a href="guide/About.html#intended-audience" class="">Intended Audience</a>
                
            </li>
                    <li>
                <a href="guide/About.html#code-examples-1" class="">Code examples</a>
                
            </li>
                    <li>
                <a href="guide/About.html#feedback-and-contribute" class="">Feedback and Contribute</a>
                
            </li>
                    <li>
                <a href="guide/About.html#credits-1" class="">Credits</a>
                
            </li>
                    <li>
                <a href="guide/About.html#dedication-1" class="">Dedication</a>
                
            </li>
            </ul>

                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="guide/Sitemap.html#sitemap" class="">Sitemap</a>
</h4>

                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="guide/genindex.html#index" class="">Index</a>
</h4>

                        </section>
            
    <section class="phpdocumentor-sidebar__category">
        <h2 class="phpdocumentor-sidebar__category-header">Reports</h2>
                <h3 class="phpdocumentor-sidebar__root-package"><a href="reports/deprecated.html">Deprecated</a></h3>
        <h3 class="phpdocumentor-sidebar__root-package"><a href="reports/errors.html">Errors</a></h3>
        <h3 class="phpdocumentor-sidebar__root-package"><a href="reports/markers.html">Markers</a></h3>
    </section>

    <section class="phpdocumentor-sidebar__category">
        <h2 class="phpdocumentor-sidebar__category-header">Indices</h2>
        <h3 class="phpdocumentor-sidebar__root-package"><a href="indices/files.html">Files</a></h3>
    </section>
</aside>

            <div class="phpdocumentor-column -nine phpdocumentor-content">
                                        <section>
        
<div class="section" id="routing-advanced-routing-configuration">
    <h1>Advanced routing configuration (for extensions)</h1>
            <p>:local:</p>
    </div>
<div class="section" id="introduction">
    <h1>Introduction</h1>
            <p>While page-based routing works out of the box, routing for extensions has to be
configured explicitly in your site configuration.</p>
            <div class="phpdocumentor-admonition -note">
            <svg class="phpdocumentor-admonition__icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"></path></svg>
                    <article>
        <p>There is no graphical user interface available to configure extended
routing. All adjustments need to be done via manual editing your website&#039;s
config.yaml site configuration file (located in
config/sites/).</p>

    </article>
</div>
            <p>To map GET parameters to routes, a concept called &quot;enhancers and aspects&quot; has
been introduced.</p>
            <p>An enhancer creates
variants of a specific page-based route for a specific purpose (e.g. an
Extbase plugin) and enhances the existing route path, which
can then contain flexible values, so-called &quot;placeholders&quot;.</p>
            <p>On top, aspects can be
registered for a specific enhancer to modify a specific placeholder, like static
human readable names within the route path or dynamically generated values.</p>
            <p>To give you an overview of what the distinction is, we take a regular page which
is available at</p>
            <p>https://example.org/path-to/my-page</p>
            <p>to access the page with ID <em>13</em>.</p>
            <p>Enhancers are a way to extend this route with placeholders on top of this
specific route to a page:</p>
            <p>https://example.org/path-to/my-page/products/</p>
            <p>The suffix /products/ to the base route of the page is added by
an enhancer. The placeholder variable added by the curly braces can then be
resolved statically or dynamically, or built by an aspect (more commonly
known as a &quot;mapper&quot;).</p>
            <p>It is possible to use the same enhancer multiple times with different
configurations. Be aware that it is not possible to combine multiple variants /
enhancers matching multiple configurations.</p>
            <p>However, custom enhancers can be created to overcome special use cases, for
example, when two plugins with multiple parameters each could be configured.
Otherwise, the first variant matching the URL parameters is used for generation
and resolving.</p>
            <a id="routing-advanced-routing-configuration-enhancers"></a>
    </div>
<div class="section" id="enhancers">
    <h1>Enhancers</h1>
            <p>There are two types of enhancers: decorators and route enhancers. A route
enhancer is there to replace a set of placeholders and fill in URL parameters
during URL generation and resolve them properly later. The substitution of
values with aliases can be achieved by aspects. To simplify, a route enhancer
specifies how the full route path looks like and which variables are available,
whereas an aspect takes care of mapping a single variable to a value.</p>
            <p>TYPO3 comes with the following route enhancers out of the box:</p>
            

<ul>
    <li class="dash">Simple enhancer
(enhancer type Simple)</li>
    <li class="dash">Plugin enhancer
(enhancer type Plugin)</li>
    <li class="dash">Extbase plugin enhancer
(enhancer type Extbase)</li>
</ul>
            <p>TYPO3 provides the following decorator out of the box:</p>
            

<ul>
    <li class="dash">Page type decorator
(enhancer type PageType)</li>
</ul>
            <p>Custom enhancers can be registered by adding an entry to an extension&#039;s
ext_localconf.php file:</p>
            <pre><code class="language-php">$GLOBALS[&#039;TYPO3_CONF_VARS&#039;][&#039;SYS&#039;][&#039;routing&#039;][&#039;enhancers&#039;][&#039;CustomEnhancer&#039;]
    = \MyVendor\MyPackage\Routing\CustomEnhancer::class;</code></pre>
            <p>Within a configuration, an enhancer always evaluates the following properties:</p>
            <dl>
                        <dt>type</dt>
        
        <dd>The short name of the enhancer as registered within
$GLOBALS['TYPO3_CONF_VARS']. This is mandatory.</dd>                        <dt>limitToPages</dt>
        
        <dd>An array of page IDs where this enhancer should be called. This is optional.
This property (array) triggers an enhancer only for specific pages. In case
of special plugin pages, it is recommended to enhance only those pages with
the plugin to speed up performance of building page routes of all other
pages.</dd>    </dl>
            <p>All enhancers allow to configure at least one route with the following
configuration:</p>
            <dl>
                        <dt>defaults</dt>
        
        <dd>Defines which URL parameters are optional. If the parameters are omitted
during generation, they can receive a default value and do not need a
placeholder - it is possible to add them at the very end of the
routePath.</dd>                        <dt>requirements</dt>
        
        <dd><p>Specifies exactly what kind of parameter should be added to that route as a
regular expression. This way it is configurable to allow only integer
values, e.g. for pagination.</p><p>Make sure you define your requirements as strict as possible. This is
necessary so that performance is not reduced and to allow TYPO3 to match the
expected route.</p></dd>                        <dt>:<a href="yaml:414c7bcdc0df974f5b8f68bae2878cf25f30f6a0arguments">yaml:414c7bcdc0df974f5b8f68bae2878cf25f30f6a0arguments</a>`</dt>
        
        <dd>Defines what route parameters should be available to the system. In the
following example, the placeholder is called category_id, but the
URL generation receives the argument category. It is mapped to that
name (so you can access/use it as category in your custom code).</dd>    </dl>
            <p>TYPO3 will add the parameter <code>cHash</code> to URLs when necessary, see chash.
The <code>cHash</code> can be removed by converting dynamic arguments into static
arguments. All captured arguments are dynamic by default. They can be converted
to static arguments by defining the possible expected values for these
arguments. This is done by adding aspects for those arguments to provide
a static list of expected values.</p>
            <a id="routing-simple-enhancer"></a>
            <div class="section" id="simple-enhancer">
    <h2>Simple enhancer</h2>
            <p>The simple enhancer works with various route arguments to map them to an
argument to be used later.</p>
            <pre><code class="language-none">index.php?id=13&amp;category=241&amp;tag=Benni</code></pre>
            <p>results in</p>
            <pre><code class="language-none">https://example.org/path-to/my-page/show-by-category/241/Benni</code></pre>
            <p>The configuration looks like this:</p>
            <pre><code class="language-yaml">routeEnhancers:
  # Unique name for the enhancers, used internally for referencing
  CategoryListing:
    type: Simple
    limitToPages: [13]
    routePath: &#039;/show-by-category/{category_id}/{tag}&#039;
    defaults:
      tag: &#039;&#039;
    requirements:
      category_id: &#039;[0-9]{1,3}&#039;
      tag: &#039;[a-zA-Z0-9].*&#039;
    _arguments:
      category_id: &#039;category&#039;</code></pre>
            <p>The configuration option routePath defines the static keyword and the
available placeholders.</p>
            <div class="phpdocumentor-admonition -note">
            <svg class="phpdocumentor-admonition__icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"></path></svg>
                    <article>
        <p>For people coming from realurl in previous TYPO3 versionsroutePath can be loosely compared to some as &quot;postVarSets&quot;.</p>

    </article>
</div>
            <a id="routing-plugin-enhancer"></a>
    </div>
            <div class="section" id="plugin-enhancer">
    <h2>Plugin enhancer</h2>
            <p>The plugin enhancer works with plugins based on Core functionality.</p>
            <p>In this example we will map the raw parameters of an URL like this:</p>
            <pre><code class="language-none">https://example.org/path-to/my-page?id=13&amp;tx_felogin_pi1[forgot]=1&amp;tx_felogin_pi1[user]=82&amp;tx_felogin_pi1[hash]=ABCDEFGHIJKLMNOPQRSTUVWXYZ012345</code></pre>
            <p>The result will be an URL like this:</p>
            <pre><code class="language-none">https://example.org/path-to/my-page/forgot-password/82/ABCDEFGHIJKLMNOPQRSTUVWXYZ012345</code></pre>
            <p>The base for the plugin enhancer is the configuration of a so-called
&quot;namespace&quot;, in this case tx_felogin_pi1 - the plugin&#039;s namespace.</p>
            <p>The plugin enhancer explicitly sets exactly one additional variant for a
specific use case. In case of the frontend login, we
would need to set up multiple configurations of the plugin enhancer for
&quot;forgot password&quot; and &quot;recover password&quot;.</p>
            <pre><code class="language-yaml">routeEnhancers:
  ForgotPassword:
    type: Plugin
    limitToPages: [13]
    routePath: &#039;/forgot-password/{user}/{hash}&#039;
    namespace: &#039;tx_felogin_pi1&#039;
    defaults:
      forgot: &#039;1&#039;
    requirements:
      user: &#039;[0-9]{1,3}&#039;
      hash: &#039;^[a-zA-Z0-9]{32}$&#039;</code></pre>
            <p>If a URL is generated with the given parameters to link to a page, the result
will look like this:</p>
            <pre><code class="language-none">https://example.org/path-to/my-page/forgot-password/82/ABCDEFGHIJKLMNOPQRSTUVWXYZ012345</code></pre>
            <div class="phpdocumentor-admonition -note">
            <svg class="phpdocumentor-admonition__icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"></path></svg>
                    <article>
        <p>If the input given to generate the URL does not meet the requirements, the
route enhancer does not offer the variant, and the parameters are added to
the URL as regular query parameters. For example, if the user parameter
would be more than three characters or non-numeric, this enhancer would not
match anymore.</p>

    </article>
</div>
            <p>As you see, the plugin enhancer is used to specify placeholders and
requirements with a given namespace.</p>
            <p>If you want to replace the user ID (in this example &quot;82&quot;) with the username,
you would need an aspect that can be registered within any enhancer, see
below for details.</p>
            <a id="routing-extbase-plugin-enhancer"></a>
    </div>
            <div class="section" id="extbase-plugin-enhancer">
    <h2>Extbase plugin enhancer</h2>
            <p>When creating Extbase plugins, it is very common to have
multiple controller/action combinations. Therefore, the Extbase plugin enhancer
is an extension to the regular plugin enhancer and provides the
functionality to generate multiple variants, typically based on the available
controller/action pairs.</p>
            <div class="phpdocumentor-admonition -warning">
                <svg class="phpdocumentor-admonition__icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg>
                <article>
        <p>Do not set features.skipDefaultArguments in your Extbase
plugin configuration as this will result in missing parameters to be mapped
- then no matching route configuration can be found.</p>

    </article>
</div>
            <p>The Extbase plugin enhancer with the configuration below would now apply to the
following URLs:</p>
            <pre><code class="language-none">index.php?id=13&amp;tx_news_pi1[controller]=News&amp;tx_news_pi1[action]=list
index.php?id=13&amp;tx_news_pi1[controller]=News&amp;tx_news_pi1[action]=list&amp;tx_news_pi1[page]=5
index.php?id=13&amp;tx_news_pi1[controller]=News&amp;tx_news_pi1[action]=list&amp;tx_news_pi1[year]=2018&amp;tx_news_pi1[month]=8
index.php?id=13&amp;tx_news_pi1[controller]=News&amp;tx_news_pi1[action]=detail&amp;tx_news_pi1[news]=13
index.php?id=13&amp;tx_news_pi1[controller]=News&amp;tx_news_pi1[action]=tag&amp;tx_news_pi1[tag]=11</code></pre>
            <p>And generate the following URLs:</p>
            <pre><code class="language-none">https://example.org/path-to/my-page/list/
https://example.org/path-to/my-page/list/5
https://example.org/path-to/my-page/list/2018/8
https://example.org/path-to/my-page/detail/in-the-year-2525
https://example.org/path-to/my-page/tag/future</code></pre>
            <pre><code class="language-yaml">routeEnhancers:
  NewsPlugin:
    type: Extbase
    limitToPages: [13]
    extension: News
    plugin: Pi1
    routes:
      - routePath: &#039;/list/&#039;
        _controller: &#039;News::list&#039;
      - routePath: &#039;/list/{page}&#039;
        _controller: &#039;News::list&#039;
        _arguments:
          page: &#039;@widget_0/currentPage&#039;
      - routePath: &#039;/detail/{news_title}&#039;
        _controller: &#039;News::detail&#039;
        _arguments:
          news_title: &#039;news&#039;
      - routePath: &#039;/tag/{tag_name}&#039;
        _controller: &#039;News::list&#039;
        _arguments:
          tag_name: &#039;overwriteDemand/tags&#039;
      - routePath: &#039;/list/{year}/{month}&#039;
        _controller: &#039;News::list&#039;
        _arguments:
          year: &#039;overwriteDemand/year&#039;
          month: &#039;overwriteDemand/month&#039;
        requirements:
          year: &#039;\d+&#039;
          month: &#039;\d+&#039;
    defaultController: &#039;News::list&#039;
    defaults:
      page: &#039;0&#039;
    aspects:
      news_title:
        type: PersistedAliasMapper
        tableName: tx_news_domain_model_news
        routeFieldName: path_segment
      page:
        type: StaticRangeMapper
        start: &#039;1&#039;
        end: &#039;100&#039;
      month:
        type: StaticRangeMapper
        start: &#039;1&#039;
        end: &#039;12&#039;
      year:
        type: StaticRangeMapper
        start: &#039;1984&#039;
        end: &#039;2525&#039;
      tag_name:
        type: PersistedAliasMapper
        tableName: tx_news_domain_model_tag
        routeFieldName: slug</code></pre>
            <p>In this example, the :<a href="yaml:770789e40a85322b261eed05e09c173c8e8f06b0arguments">yaml:770789e40a85322b261eed05e09c173c8e8f06b0arguments</a>` parameter is used to set sub-properties
of an array, which is typically used within demand objects for filtering
functionality. Additionally, it is using both the short and the long form of
writing route configurations.</p>
            <p>Instead of using the combination of extension and plugin one can
also provide the namespace property as in the
regular plugin enhancer:</p>
            <pre><code class="language-yaml">routeEnhancers:
  NewsPlugin:
    type: Extbase
    limitToPages: [13]
    namespace: tx_news_pi1
    # ... further configuration</code></pre>
            <dl>
                        <dt>Prior to version 12.2 the combination of extension and</dt>
        
        <dd>plugin was preferred when all three properties are given. Since
v12.2 the namespace property has precedence.</dd><dd></dd>    </dl>
            <p>To understand what is happening in the aspects part, read on.</p>
            <dl>
                        <dt>Please ensure not to register the same routePath more than once, for</dt>
        
        <dd>example through multiple extensions. In that case, the enhancer imported
last will override any duplicate routes that are in place.</dd><dd></dd>    </dl>
            <a id="routing-pagetype-decorator"></a>
    </div>
            <div class="section" id="pagetype-decorator">
    <h2>PageType decorator</h2>
            <p>The PageType enhancer (decorator) allows to add a suffix to the existing route
(including existing other enhancers) to map a page type (GET parameter &type=)
to a suffix.</p>
            <p>It is possible to map various page types to endings:</p>
            <p>Example in TypoScript:</p>
            <pre><code class="language-typoscript">page = PAGE
page.typeNum = 0
page.10 = TEXT
page.10.value = Default page

rssfeed = PAGE
rssfeed.typeNum = 13
rssfeed.10 &lt; plugin.tx_myplugin
rssfeed.config.disableAllHeaderCode = 1
rssfeed.config.additionalHeaders.10.header = Content-Type: xml/rss

jsonview = PAGE
jsonview.typeNum = 26
jsonview.10 = USER
jsonview.10.userFunc = MyVendor\MyExtension\Controller\JsonPageController-&gt;renderAction
jsonview.10.config.disableAllHeaderCode = 1
jsonview.10.config.additionalHeaders.10.header = Content-Type: application/json</code></pre>
            <p>Now we configure the enhancer in your site&#039;s config.yaml file like this:</p>
            <pre><code class="language-yaml">routeEnhancers:
  PageTypeSuffix:
    type: PageType
    default: &#039;&#039;
    map:
      &#039;rss.feed&#039;: 13
      &#039;.json&#039;: 26</code></pre>
            <p>The map allows to add a filename or a file ending and map this to
a page.typeNum value.</p>
            <p>It is also possible to set default, for example to .html to add
a &quot;.html&quot; suffix to all default pages:</p>
            <pre><code class="language-yaml">routeEnhancers:
  PageTypeSuffix:
    type: PageType
    default: &#039;.html&#039;
    index: &#039;index&#039;
    map:
      &#039;rss.feed&#039;: 13
      &#039;.json&#039;: 26</code></pre>
            <p>The index property is used when generating links on root-level page,
so instead of having /en/.html it would then result in
/en/index.html.</p>
            <div class="phpdocumentor-admonition -note">
            <svg class="phpdocumentor-admonition__icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"></path></svg>
                    <article>
        <p>The implementation is a decorator enhancer, which means that the
PageType enhancer is only there for adding suffixes to an existing route /
variant, but not to substitute something within the middle of a
human-readable URL segment.</p>

    </article>
</div>
            <a id="routing-advanced-routing-configuration-aspects"></a>
    </div>
    </div>
<div class="section" id="aspects">
    <h1>Aspects</h1>
            <p>Now that we have looked at how to extend a route to a page with arguments and
insert them as segments in the URL, the detailed logic within a placeholder is
in an aspect. The most common practice of an aspect is called a mapper. For
example, a parameter {news}, which is a UID within TYPO3, is mapped to
the actual news slug, which is a field within the database table containing the
cleaned/sanitized title of the news (for example, &quot;software-updates-2022&quot; maps
to news ID 10).</p>
            <p>An aspect can be a way to modify, beautify or map an argument from the URL
generation into a placeholder. That&#039;s why the terms &quot;mapper&quot; and &quot;modifier&quot; will
pop up, depending on the different cases.</p>
            <p>Aspects are registered within one single enhancer configuration with the option
aspects and can be used with any enhancer.</p>
            <p>Let us start with some examples first:</p>
            <div class="section" id="staticvaluemapper">
    <h2>StaticValueMapper</h2>
            <p>The static value mapper replaces values on a 1:1 mapping list of an argument
into a speaking segment, useful for a checkout process to define the steps into
&quot;cart&quot;, &quot;shipping&quot;, &quot;billing&quot;, &quot;overview&quot; and &quot;finish&quot;, or in another example to
create human-readable segments for all available months.</p>
            <p>The configuration could look like this:</p>
            <pre><code class="language-yaml">routeEnhancers:
  NewsArchive:
    type: Extbase
    limitToPages: [13]
    extension: News
    plugin: Pi1
    routes:
      - { routePath: &#039;/{year}/{month}&#039;, _controller: &#039;News::archive&#039; }
    defaultController: &#039;News::list&#039;
    defaults:
      month: &#039;&#039;
    aspects:
      month:
        type: StaticValueMapper
        map:
          january: 1
          february: 2
          march: 3
          april: 4
          may: 5
          june: 6
          july: 7
          august: 8
          september: 9
          october: 10
          november: 11
          december: 12</code></pre>
            <p>You see the placeholder month where the aspect replaces the value to a
human-readable URL path segment.</p>
            <p>It is possible to add an optional localeMap to that aspect to use the
locale of a value to use in multi-language setups:</p>
            <pre><code class="language-yaml">routeEnhancers:
  NewsArchive:
    type: Extbase
    limitToPages: [13]
    extension: News
    plugin: Pi1
    routes:
      - { routePath: &#039;/{year}/{month}&#039;, _controller: &#039;News::archive&#039; }
    defaultController: &#039;News::list&#039;
    defaults:
      month: &#039;&#039;
    aspects:
      month:
        type: StaticValueMapper
        map:
          january: 1
          february: 2
          march: 3
          april: 4
          may: 5
          june: 6
          july: 7
          august: 8
          september: 9
          october: 10
          november: 11
          december: 12
        localeMap:
          - locale: &#039;de_.*&#039;
            map:
              januar: 1
              februar: 2
              maerz: 3
              april: 4
              mai: 5
              juni: 6
              juli: 7
              august: 8
              september: 9
              oktober: 10
              november: 11
              dezember: 12</code></pre>
    </div>
            <div class="section" id="localemodifier">
    <h2>LocaleModifier</h2>
            <p>The enhanced part of a route path could be /archive/{year}/{month} - however,
in multi-language setups, it should be possible to rename /archive/ depending
on the language that is given for this page translation. This modifier is a
good example where a route path is modified, but is not affected by arguments.</p>
            <p>The configuration could look like this:</p>
            <pre><code class="language-yaml">routeEnhancers:
  NewsArchive:
    type: Extbase
    limitToPages: [13]
    extension: News
    plugin: Pi1
    routes:
      - { routePath: &#039;/{localized_archive}/{year}/{month}&#039;, _controller: &#039;News::archive&#039; }
    defaultController: &#039;News::list&#039;
    aspects:
      localized_archive:
        type: LocaleModifier
        default: &#039;archive&#039;
        localeMap:
          - locale: &#039;fr_FR.*|fr_CA.*&#039;
            value: &#039;archives&#039;
          - locale: &#039;de_DE.*&#039;
            value: &#039;archiv&#039;</code></pre>
            <p>You will see the placeholder localized_archive where the aspect
replaces the localized archive based on the locale of the language of that page.</p>
    </div>
            <div class="section" id="staticrangemapper">
    <h2>StaticRangeMapper</h2>
            <p>A static range mapper allows to avoid the cHash and narrow down the available
possibilities for a placeholder. It explicitly defines a range for a value,
which is recommended for all kinds of pagination functionality.</p>
            <pre><code class="language-yaml">routeEnhancers:
  NewsPlugin:
    type: Extbase
    limitToPages: [13]
    extension: News
    plugin: Pi1
    routes:
      - { routePath: &#039;/list/{page}&#039;, _controller: &#039;News::list&#039;, _arguments: {&#039;page&#039;: &#039;@widget_0/currentPage&#039;} }
    defaultController: &#039;News::list&#039;
    defaults:
      page: &#039;0&#039;
    aspects:
      page:
        type: StaticRangeMapper
        start: &#039;1&#039;
        end: &#039;100&#039;</code></pre>
            <p>This limits down the pagination to a maximum of 100 pages. If a user calls the
news list with page 101, the route enhancer does not match and would not apply
the placeholder.</p>
            <div class="phpdocumentor-admonition -note">
            <svg class="phpdocumentor-admonition__icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"></path></svg>
                    <article>
        <p>A range larger than 1000 is not allowed.</p>

    </article>
</div>
    </div>
            <div class="section" id="persistedaliasmapper">
    <h2>PersistedAliasMapper</h2>
            <p>If an extension ships with a slug field or a different field used for the
speaking URL path, this database field can be used to build the URL:</p>
            <pre><code class="language-yaml">routeEnhancers:
  NewsPlugin:
    type: Extbase
    limitToPages: [13]
    extension: News
    plugin: Pi1
    routes:
      - { routePath: &#039;/detail/{news_title}&#039;, _controller: &#039;News::detail&#039;, _arguments: {&#039;news_title&#039;: &#039;news&#039;} }
    defaultController: &#039;News::detail&#039;
    aspects:
      news_title:
        type: PersistedAliasMapper
        tableName: &#039;tx_news_domain_model_news&#039;
        routeFieldName: &#039;path_segment&#039;
        routeValuePrefix: &#039;/&#039;</code></pre>
            <p>The persisted alias mapper looks up the table and the field to map the given
value to a URL. The property tableName points to the database table,
the property routeFieldName is the field which will be used within the
route path, in this example path_segment.</p>
            <p>The special routeValuePrefix is used for TCA type slug fields
where the prefix / is within all fields of the field names, which should
be removed in the case above.</p>
            <p>If a field is used for routeFieldName that is not prepared to be put
into the route path, e.g. the news title field, you <strong>must</strong> ensure that this is
unique and suitable for the use in an URL. On top, special characters like
spaces will not be converted automatically. Therefore, usage of a slug TCA field
is recommended.</p>
    </div>
            <div class="section" id="persistedpatternmapper">
    <h2>PersistedPatternMapper</h2>
            <p>When a placeholder should be fetched from multiple fields of the database, the
persisted pattern mapper is for you. It allows to combine various fields into
one variable, ensuring a unique value, for example by adding the UID to the
field without having the need of adding a custom slug field to the system.</p>
            <pre><code class="language-yaml">routeEnhancers:
  Blog:
    type: Extbase
    limitToPages: [13]
    extension: BlogExample
    plugin: Pi1
    routes:
      - { routePath: &#039;/blog/{blogpost}&#039;, _controller: &#039;Blog::detail&#039;, _arguments: {&#039;blogpost&#039;: &#039;post&#039;} }
    defaultController: &#039;Blog::detail&#039;
    aspects:
      blogpost:
        type: PersistedPatternMapper
        tableName: &#039;tx_blogexample_domain_model_post&#039;
        routeFieldPattern: &#039;^(?P&lt;title&gt;.+)-(?P&lt;uid&gt;\d+)$&#039;
        routeFieldResult: &#039;{title}-{uid}&#039;</code></pre>
            <p>The routeFieldPattern option builds the title and uid fields from the
database, the routeFieldResult shows how the placeholder will be output.
However, as mentioned above special characters in the title might still be a
problem. The persisted pattern mapper` might be a good choice if you are
upgrading from a previous version and had URLs with an appended UID for
uniqueness.</p>
    </div>
    </div>
<div class="section" id="aspect-precedence">
    <h1>Aspect precedence</h1>
            <p>Route requirements are ignored for route variables having a
corresponding setting in aspects. Imagine an aspect that is mapping an
internal value 1 to route value one and vice versa - it is not possible to
explicitly define the requirements for this case - which is why
aspects take precedence.</p>
            <p>The following example illustrates the mentioned dilemma between route generation
and resolving:</p>
            <pre><code class="language-yaml">routeEnhancers:
  MyPlugin:
    type: &#039;Plugin&#039;
    namespace: &#039;my&#039;
    routePath: &#039;overview/{month}&#039;
    requirements:
      # note: it does not make any sense to declare all values here again
      month: &#039;^(\d+|january|february|march|april|...|december)$&#039;
    aspects:
      month:
        type: &#039;StaticValueMapper&#039;
        map:
          january: &#039;1&#039;
          february: &#039;2&#039;
          march: &#039;3&#039;
          april: &#039;4&#039;
          may: &#039;5&#039;
          june: &#039;6&#039;
          july: &#039;7&#039;
          august: &#039;8&#039;
          september: &#039;9&#039;
          october: &#039;10&#039;
          november: &#039;11&#039;
          december: &#039;12&#039;</code></pre>
            <p>The map in the previous example is already defining all valid values.
That is why aspects take precedence over requirements for a
specific routePath definition.</p>
    </div>
<div class="section" id="aspect-fallback-value-handling">
    <h1>Aspect fallback value handling</h1>
            <p>Imagine a route like /news/{news_title} that has been filled with an &quot;invalid&quot;
value for the news_title part. Often these are outdated, deleted or hidden
records. Usually TYPO3 reacts to these &quot;invalid&quot; URL sections at a very early
stage with an HTTP status code &quot;404&quot; (resource not found).</p>
            <p>The property fallbackValue = [string|null] can prevent the above
scenario in several ways. By specifying an alternative value, a different
record, language or other detail can be represented. Specifying null
removes the corresponding parameter from the route result. In this way, it is
up to the developer to react accordingly.</p>
            <p>In the case of Extbase extensions, the developer can define the
parameters in his calling controller action as nullable and deliver
corresponding flash messages that explain the current
scenario better than a &quot;404&quot; HTTP status code.</p>
            <div class="section" id="examples">
    <h2>Examples</h2>
            <pre><code class="language-yaml">routeEnhancers:
  NewsPlugin:
    type: Extbase
    extension: News
    plugin: Pi1
    routes:
      - routePath: &#039;/detail/{news_title}&#039;
        _controller: &#039;News::detail&#039;
        _arguments:
          news_title: &#039;news&#039;
    aspects:
      news_title:
        type: PersistedAliasMapper
        tableName: tx_news_domain_model_news
        routeFieldName: path_segment

        # A string value leads to parameter `&amp;tx_news_pi1[news]=0`
        fallbackValue: &#039;0&#039;

        # A null value leads to parameter `&amp;tx_news_pi1[news]` being removed
        fallbackValue: null</code></pre>
            <p>Custom mapper implementations can incorporate this behavior by implementing
the \TYPO3\CMS\Core\Routing\Aspect\UnresolvedValueInterface which is
provided by \TYPO3\CMS\Core\Routing\Aspect\UnresolvedValueTrait:</p>
            <pre><code class="language-php">use TYPO3\CMS\Core\Routing\Aspect\MappableAspectInterface;
use TYPO3\CMS\Core\Routing\Aspect\UnresolvedValueInterface;
use TYPO3\CMS\Core\Routing\Aspect\UnresolvedValueTrait;

final class MyCustomEnhancer implements MappableAspectInterface, UnresolvedValueInterface
{
    use UnresolvedValueTrait;

    // ...
}</code></pre>
            <p>In another example we handle the null value in an Extbase show action
separately, for instance, to redirect to the list page:</p>
            <pre><code class="language-php">public function showAction(?MyModel $myModel = null): ResponseInterface
{
    if ($myModel === null) {
        return $this-&gt;responseFactory
            -&gt;createResponse(301)
            -&gt;withHeader(&#039;Location&#039;, $this-&gt;buildListPageUrl());
    }

    // ... default handling
}</code></pre>
    </div>
    </div>
<div class="section" id="behind-the-scenes">
    <h1>Behind the Scenes</h1>
            <p>While accessing a page in TYPO3 in the frontend, all arguments are currently
built back into the global GET parameters, but are also available as so-called
\TYPO3\CMS\Core\Routing\PageArguments object. The PageArguments
object is then used to sign and verify the parameters, to ensure that they are
valid, when handing them further down the frontend request chain.</p>
            <p>If there are dynamic parameters (= parameters which are not strictly limited), a
verification GET parameter cHash is added, which <strong>can and should not be
removed</strong> from the URL. The concept of manually activating or deactivating
the generation of a cHash is not optional anymore, but strictly built-in to
ensure proper URL handling. If you really have the requirement to not have a
cHash argument, ensure that all placeholders are having strict definitions
on what could be the result of the page segment (e.g. pagination), and feel
free to build custom mappers.</p>
            <p>All existing APIs like typolink or functionality evaluate the
page routing API directly.</p>
            <div class="phpdocumentor-admonition -note">
            <svg class="phpdocumentor-admonition__icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"></path></svg>
                    <article>
        <p>If you update the site configuration with enhancers you have to to clear
all caches, for example via the upper menu bar in the backend.</p>

    </article>
</div>
    </div>

    </section>
                            </div>
            <section data-search-results class="phpdocumentor-search-results phpdocumentor-search-results--hidden">
    <section class="phpdocumentor-search-results__dialog">
        <header class="phpdocumentor-search-results__header">
            <h2 class="phpdocumentor-search-results__title">Search results</h2>
            <button class="phpdocumentor-search-results__close"><i class="fas fa-times"></i></button>
        </header>
        <section class="phpdocumentor-search-results__body">
            <ul class="phpdocumentor-search-results__entries"></ul>
        </section>
    </section>
</section>
        </div>
        <a href="guide/ApiOverview/Routing/AdvancedRoutingConfiguration.html#top" class="phpdocumentor-back-to-top"><i class="fas fa-chevron-circle-up"></i></a>

    </main>

    <script>
        cssVars({});
    </script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/prism.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/plugins/line-numbers/prism-line-numbers.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/plugins/line-highlight/prism-line-highlight.min.js"></script>
</body>
</html>