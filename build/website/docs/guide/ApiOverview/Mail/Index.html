<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
                    <title>phpDocumentor</title>
    

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <base href="../../../">
    <link rel="icon" href="images/favicon.ico"/>
    <link rel="stylesheet" href="css/normalize.css">
    <link rel="stylesheet" href="css/base.css">
            <link rel="preconnect" href="https://fonts.gstatic.com">
        <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@100;200;300;400;600;700&display=swap" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:wght@400;600;700&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="css/template.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.0/css/all.min.css" integrity="sha256-ybRkN9dBjhcS2qrW1z+hfCxq+1aBdwyQM5wlQoQVt/0=" crossorigin="anonymous" />
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/themes/prism-okaidia.css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/plugins/line-numbers/prism-line-numbers.css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/plugins/line-highlight/prism-line-highlight.css">
                <script src="https://cdn.jsdelivr.net/npm/fuse.js@3.4.6"></script>
        <script src="https://cdn.jsdelivr.net/npm/css-vars-ponyfill@2"></script>
        <script src="js/template.js"></script>
        <script src="js/search.js"></script>
        <script defer src="js/searchIndex.js"></script>
    </head>
<body id="top">
    <header class="phpdocumentor-header phpdocumentor-section">
    <h1 class="phpdocumentor-title"><a href="" class="phpdocumentor-title__link">phpDocumentor</a></h1>
    <input class="phpdocumentor-header__menu-button" type="checkbox" id="menu-button" name="menu-button" />
    <label class="phpdocumentor-header__menu-icon" for="menu-button">
        <i class="fas fa-bars"></i>
    </label>
    <section data-search-form class="phpdocumentor-search">
    <label>
        <span class="visually-hidden">Search for</span>
        <svg class="phpdocumentor-search__icon" width="21" height="20" viewBox="0 0 21 20" fill="none" xmlns="http://www.w3.org/2000/svg">
            <circle cx="7.5" cy="7.5" r="6.5" stroke="currentColor" stroke-width="2"/>
            <line x1="12.4892" y1="12.2727" x2="19.1559" y2="18.9393" stroke="currentColor" stroke-width="3"/>
        </svg>
        <input type="search" class="phpdocumentor-field phpdocumentor-search__field" placeholder="Loading .." disabled />
    </label>
</section>

    <nav class="phpdocumentor-topnav">
    <ul class="phpdocumentor-topnav__menu">
        </ul>
</nav>
</header>

    <main class="phpdocumentor">
        <div class="phpdocumentor-section">
            <input class="phpdocumentor-sidebar__menu-button" type="checkbox" id="sidebar-button" name="sidebar-button" />
<label class="phpdocumentor-sidebar__menu-icon" for="sidebar-button">
    Menu
</label>
<aside class="phpdocumentor-column -three phpdocumentor-sidebar">
                    <section class="phpdocumentor-sidebar__category">
            <h2 class="phpdocumentor-sidebar__category-header">typo3-explained</h2>
                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="guide/Introduction/Index.html#introduction" class="">Introduction</a>
</h4>
    <ul class="phpdocumentor-list">
                    <li>
                <a href="guide/Introduction/Index.html#system-overview-1" class="">System Overview</a>
                
            </li>
                    <li>
                <a href="guide/Introduction/Index.html#a-basic-installation" class="">A basic installation</a>
                
            </li>
            </ul>

                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="guide/ApiOverview/Index.html#api-a-z" class="">API A-Z</a>
</h4>

                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="guide/CodingGuidelines/Index.html#cgl" class="">Coding Guidelines</a>
</h4>
    <ul class="phpdocumentor-list">
                    <li>
                <a href="guide/CodingGuidelines/Introduction.html#cgl-introduction" class="">Introduction</a>
                
            </li>
                    <li>
                <a href="guide/CodingGuidelines/CglPhp/Index.html#cgl-php" class="">PHP Coding Guidelines</a>
                
            </li>
                    <li>
                <a href="guide/CodingGuidelines/CglJavaScript/Index.html#cgl-javascript" class="">JavaScript Coding Guidelines</a>
                
            </li>
                    <li>
                <a href="guide/CodingGuidelines/CglTypeScript/Index.html#cgl-typescript" class="">TypeScript Coding Guidelines</a>
                
            </li>
                    <li>
                <a href="guide/CodingGuidelines/CglTypoScript/Index.html#cgl-typoscript" class="">TypoScript Coding Guidelines</a>
                
            </li>
                    <li>
                <a href="guide/CodingGuidelines/CglTsConfig.html#cgl-tsconfig" class="">TSconfig Coding Guidelines</a>
                
            </li>
                    <li>
                <a href="guide/CodingGuidelines/CglXliff/Index.html#cgl-xliff" class="">Xliff Coding Guidelines</a>
                
            </li>
                    <li>
                <a href="guide/CodingGuidelines/CglYaml.html#cgl-yaml" class="">Yaml Coding Guidelines</a>
                
            </li>
                    <li>
                <a href="guide/CodingGuidelines/CglRest/Index.html#cgl-rest" class="">reStructuredText (reST)</a>
                
            </li>
            </ul>

                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="guide/Configuration/Index.html#configuration" class="">Configuration</a>
</h4>
    <ul class="phpdocumentor-list">
                    <li>
                <a href="guide/Configuration/ConfigurationOverview.html#config-overview" class="">Configuration overview</a>
                
            </li>
                    <li>
                <a href="guide/Configuration/Glossary.html#configuration-classification" class="">Glossary</a>
                
            </li>
                    <li>
                <a href="guide/Configuration/ConfigurationFiles.html#configuration-files" class="">Configuration files</a>
                
            </li>
                    <li>
                <a href="guide/Configuration/ConfigurationModule/Index.html#configuration-module" class="">Configuration module</a>
                
            </li>
                    <li>
                <a href="guide/Configuration/FeatureToggles.html#feature-toggles" class="">Feature toggles</a>
                
            </li>
                    <li>
                <a href="guide/Configuration/GlobalVariables.html#globals-variables" class="">$GLOBALS</a>
                
            </li>
                    <li>
                <a href="guide/Configuration/Typo3ConfVars/Index.html#typo3-conf-vars" class="">TYPO3_CONF_VARS</a>
                
            </li>
                    <li>
                <a href="guide/Configuration/Typo3Information.html#typo3Information" class="">Global meta information about TYPO3</a>
                
            </li>
                    <li>
                <a href="guide/Configuration/Tsconfig.html#tsconfig" class="">TSconfig</a>
                
            </li>
                    <li>
                <a href="guide/Configuration/TypoScriptSyntax/Index.html#typoscript-syntax-about" class="">TypoScript syntax</a>
                
            </li>
                    <li>
                <a href="guide/Configuration/UserSettingsConfiguration/Index.html#user-settings" class="">User settings configuration</a>
                
            </li>
                    <li>
                <a href="guide/Configuration/Yaml/Index.html#yaml" class="">YAML</a>
                
            </li>
            </ul>

                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="guide/ExtensionArchitecture/Index.html#extension-development" class="">Extension development</a>
</h4>
    <ul class="phpdocumentor-list">
                    <li>
                <a href="guide/ExtensionArchitecture/Concepts/Index.html#extension-concepts" class="">Concepts</a>
                
            </li>
                    <li>
                <a href="guide/ExtensionArchitecture/FileStructure/Index.html#extension-reserved-folders-legacy" class="">File structure</a>
                
            </li>
                    <li>
                <a href="guide/ExtensionArchitecture/HowTo/Index.html#extension-howto" class="">Howto</a>
                
            </li>
                    <li>
                <a href="guide/ExtensionArchitecture/Extbase/Index.html#extbase" class="">Extbase</a>
                
            </li>
                    <li>
                <a href="guide/ExtensionArchitecture/BestPractises/Index.html#extension-Best-practises" class="">Best practises and conventions</a>
                
            </li>
                    <li>
                <a href="guide/ExtensionArchitecture/Tutorials/Index.html#extension-tutorials" class="">Tutorials</a>
                
            </li>
            </ul>

                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="guide/Security/Index.html#security" class="">Security guidelines</a>
</h4>
    <ul class="phpdocumentor-list">
                    <li>
                <a href="guide/Security/Introduction/Index.html#security-introduction" class="">Introduction</a>
                
            </li>
                    <li>
                <a href="guide/Security/SecurityTeam/Index.html#security-team" class="">The TYPO3 Security Team</a>
                
            </li>
                    <li>
                <a href="guide/Security/GeneralInformation/Index.html#security-general-information" class="">General Information</a>
                
            </li>
                    <li>
                <a href="guide/Security/TypesOfThreats/Index.html#security-threats" class="">Types of Security Threats</a>
                
            </li>
                    <li>
                <a href="guide/Security/GeneralGuidelines/Index.html#security-general-guidelines" class="">General guidelines</a>
                
            </li>
                    <li>
                <a href="guide/Security/GuidelinesAdministrators/Index.html#security-administrators" class="">Guidelines for System Administrators</a>
                
            </li>
                    <li>
                <a href="guide/Security/GuidelinesExtensionDevelopment/Index.html#security-extension-development" class="">Guidelines for extension development</a>
                
            </li>
                    <li>
                <a href="guide/Security/GuidelinesIntegrators/Index.html#security-integrators" class="">Guidelines for TYPO3 integrators</a>
                
            </li>
                    <li>
                <a href="guide/Security/GuidelinesEditors/Index.html#security-editors" class="">Guidelines for editors</a>
                
            </li>
                    <li>
                <a href="guide/Security/Backups/Index.html#security-backups" class="">Backup strategy</a>
                
            </li>
                    <li>
                <a href="guide/Security/HackedSite/Index.html#security-detect-analyze-repair" class="">Detect, analyze and repair a hacked site</a>
                
            </li>
            </ul>

                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="guide/Testing/Index.html#testing" class="">Testing</a>
</h4>
    <ul class="phpdocumentor-list">
                    <li>
                <a href="guide/Testing/History.html#testing-history" class="">History</a>
                
            </li>
                    <li>
                <a href="guide/Testing/CoreTesting.html#testing-core" class="">Core testing</a>
                
            </li>
                    <li>
                <a href="guide/Testing/ExtensionTesting.html#testing-extensions" class="">Extension testing</a>
                
            </li>
                    <li>
                <a href="guide/Testing/ProjectTesting.html#testing-projects" class="">Project testing</a>
                
            </li>
                    <li>
                <a href="guide/Testing/WritingUnit.html#testing-writing-unit" class="">Writing unit tests</a>
                
            </li>
                    <li>
                <a href="guide/Testing/WritingFunctional.html#testing-writing-functional" class="">Writing functional tests</a>
                
            </li>
                    <li>
                <a href="guide/Testing/WritingAcceptance.html#testing-writing-acceptance" class="">Writing acceptance tests</a>
                
            </li>
                    <li>
                <a href="guide/Testing/Faq.html#testing-faq" class="">FAQ</a>
                
            </li>
            </ul>

                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="guide/About.html#about" class="">About This Manual</a>
</h4>
    <ul class="phpdocumentor-list">
                    <li>
                <a href="guide/About.html#intended-audience" class="">Intended Audience</a>
                
            </li>
                    <li>
                <a href="guide/About.html#code-examples-1" class="">Code examples</a>
                
            </li>
                    <li>
                <a href="guide/About.html#feedback-and-contribute" class="">Feedback and Contribute</a>
                
            </li>
                    <li>
                <a href="guide/About.html#credits-1" class="">Credits</a>
                
            </li>
                    <li>
                <a href="guide/About.html#dedication-1" class="">Dedication</a>
                
            </li>
            </ul>

                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="guide/Sitemap.html#sitemap" class="">Sitemap</a>
</h4>

                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="guide/genindex.html#index" class="">Index</a>
</h4>

                        </section>
            
    <section class="phpdocumentor-sidebar__category">
        <h2 class="phpdocumentor-sidebar__category-header">Reports</h2>
                <h3 class="phpdocumentor-sidebar__root-package"><a href="reports/deprecated.html">Deprecated</a></h3>
        <h3 class="phpdocumentor-sidebar__root-package"><a href="reports/errors.html">Errors</a></h3>
        <h3 class="phpdocumentor-sidebar__root-package"><a href="reports/markers.html">Markers</a></h3>
    </section>

    <section class="phpdocumentor-sidebar__category">
        <h2 class="phpdocumentor-sidebar__category-header">Indices</h2>
        <h3 class="phpdocumentor-sidebar__root-package"><a href="indices/files.html">Files</a></h3>
    </section>
</aside>

            <div class="phpdocumentor-column -nine phpdocumentor-content">
                                        <section>
        
<div class="section" id="mail-api">
    <h1>Mail API</h1>
            <p>TYPO3 provides a RFC-compliant mailing solution based on
<a href="https://symfony.com/doc/current/components/mailer.html">symfony/mailer</a>
for sending emails and
<a href="https://symfony.com/doc/current/components/mime.html">symfony/mime</a>
for creating email messages.</p>
            <p>TYPO3’s backend functionality already ships with a default layout for templated emails,
which can be tested out in TYPO3’s install tool test email functionality.</p>
            <dl>
                        <dt>:depth: 1</dt>
        
        <dd>:local:</dd><dd></dd>                        <dt>..  index::</dt>
        
        <dd>pair: Mail; Configuration
TYPO3_CONF_VARS; MAIL</dd>    </dl>
    </div>
<div class="section" id="configuration">
    <h1>Configuration</h1>
            <p>Several settings are available via Admin Tools  Settings  Configure
Installation-Wide Options  Mail which are stored into
$GLOBALS['TYPO3_CONF_VARS']['MAIL']. See typo3ConfVars_mail for
an overview of all settings.</p>
            <div class="phpdocumentor-admonition -note">
            <svg class="phpdocumentor-admonition__icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"></path></svg>
                    <article>
        <p>If you want to send emails using Microsoft 365 or Office 365, you have to
configure a connector first, as described in the article
<a href="guide/ApiOverview/Mail/Index.html#configure-a-connector-to-send-mail-using-microsoft-365-or-office-365-smtp-relay">Configure a connector to send mail using Microsoft 365 or Office 365 SMTP relay</a>.</p>

    </article>
</div>
            <div class="section" id="format">
    <h2>Format</h2>
            <p>$GLOBALS['TYPO3_CONF_VARS']['MAIL']['format'] can be both, plain or
html. This option can be overridden in the project&#039;s
config/system/settings.php or config/system/additional.php files.</p>
    </div>
            <div class="section" id="fluid-paths">
    <h2>Fluid paths</h2>
            <p>All Fluid-based template paths can be configured via</p>
            

<ul>
    <li>$GLOBALS['TYPO3_CONF_VARS']['MAIL']['layoutRootPaths']</li>
    <li>$GLOBALS['TYPO3_CONF_VARS']['MAIL']['partialRootPaths']</li>
    <li>$GLOBALS['TYPO3_CONF_VARS']['MAIL']['templateRootPaths']</li>
</ul>
            <p>where TYPO3 reserves all array keys below 100 for internal purposes.</p>
            <p>If you want to provide custom templates or layouts, set this in your
config/system/settings.php / config/system/additional.php file:</p>
            <pre><code class="language-php">$GLOBALS[&#039;TYPO3_CONF_VARS&#039;][&#039;MAIL&#039;][&#039;templateRootPaths&#039;][700]
    = &#039;EXT:my_site_extension/Resources/Private/Templates/Email&#039;;
$GLOBALS[&#039;TYPO3_CONF_VARS&#039;][&#039;MAIL&#039;][&#039;layoutRootPaths&#039;][700]
    = &#039;EXT:my_site_extension/Resources/Private/Layouts&#039;;</code></pre>
    </div>
            <div class="section" id="transport">
    <h2>transport</h2>
            <p>The most important configuration option for sending emails is
$GLOBALS['TYPO3_CONF_VARS']['MAIL']['transport'], which can take the
following values:</p>
            <div class="section" id="smtp">
    <h3>smtp</h3>
            <dl>
                        <dt>$GLOBALS['TYPO3_CONF_VARS']['MAIL']['transport'] = 'smtp';</dt>
        
        <dd>Sends messages over SMTP. It can deal with encryption and authentication.
Works exactly the same on Windows, Unix and MacOS. Requires a mail server
and the following additional settings:</dd>                        <dt>$GLOBALS['TYPO3_CONF_VARS']['MAIL']['transport_smtp_server'] = '</dt>
        
        <dd>Mail server name and port to connect to. Port defaults to 25.</dd>                        <dt>$GLOBALS['TYPO3_CONF_VARS']['MAIL']['transport_smtp_encrypt'] =</dt>
        
        <dd>Determines whether the transport protocol should be encrypted. Requires
OpenSSL library. Defaults to false.
If false, symfony/mailer will use STARTTLS.</dd>                        <dt>$GLOBALS['TYPO3_CONF_VARS']['MAIL']['transport_smtp_username] = '</dt>
        
        <dd>The username, if your SMTP server requires authentication.</dd>                        <dt>$GLOBALS['TYPO3_CONF_VARS']['MAIL']['transport_smtp_password] = '</dt>
        
        <dd>The password, if your SMTP server requires authentication.</dd>    </dl>
            <p>Example:</p>
            <pre><code class="language-php">$GLOBALS[&#039;TYPO3_CONF_VARS&#039;][&#039;MAIL&#039;][&#039;transport&#039;] = &#039;smtp&#039;;
$GLOBALS[&#039;TYPO3_CONF_VARS&#039;][&#039;MAIL&#039;][&#039;transport_smtp_server&#039;] = &#039;localhost&#039;;
$GLOBALS[&#039;TYPO3_CONF_VARS&#039;][&#039;MAIL&#039;][&#039;transport_smtp_encrypt&#039;] = true;
$GLOBALS[&#039;TYPO3_CONF_VARS&#039;][&#039;MAIL&#039;][&#039;transport_smtp_username&#039;] = &#039;johndoe&#039;;
$GLOBALS[&#039;TYPO3_CONF_VARS&#039;][&#039;MAIL&#039;][&#039;transport_smtp_password&#039;] = &#039;cooLSecret&#039;;
// Fetches all &#039;returning&#039; emails:
$GLOBALS[&#039;TYPO3_CONF_VARS&#039;][&#039;MAIL&#039;][&#039;defaultMailFromAddress&#039;] = &#039;bounces@example.org&#039;;</code></pre>
    </div>
            <div class="section" id="sendmail">
    <h3>sendmail</h3>
            <dl>
                        <dt>$GLOBALS['TYPO3_CONF_VARS']['MAIL']['transport'] = 'sendmail';</dt>
        
        <dd>Sends messages by communicating with a locally installed MTA - such as sendmail.
This may require setting the additional option:</dd>                        <dt>$GLOBALS['TYPO3_CONF_VARS']['MAIL']['transport_sendmail_command'] = '</dt>
        
        <dd><p>The command to call to send an email locally. The default works on most
modern Unix-based mail servers (sendmail, postfix, exim).</p><p>Example:</p><pre><code class="language-php">$GLOBALS[&#039;TYPO3_CONF_VARS&#039;][&#039;MAIL&#039;][&#039;transport&#039;] = &#039;sendmail&#039;;
$GLOBALS[&#039;TYPO3_CONF_VARS&#039;][&#039;MAIL&#039;][&#039;transport_sendmail_command&#039;] = &#039;/usr/sbin/sendmail -bs&#039;;</code></pre><blockquote><p>Depending on the configuration of the server and the TYPO3 instance, it
may not be possible to send emails to BCC recipients. The configuration
of the $GLOBALS['TYPO3_CONF_VARS']['MAIL']['transport_sendmail_command']
value is crucial.</p><p>TYPO3 recommends the parameter -bs (instead of -t -i). The
parameter -bs tells TYPO3 to use the SMTP standard and that way
the BCC recipients are properly set.
<a href="https://symfony.com/doc/current/mailer.html#using-built-in-transports">Symfony</a>
refers to the problem of using the -t parameter as well. Since
65791 the transport_sendmail_command is automatically
set from the PHP runtime configuration and saved. Thus, if you have
problems with sending emails to BCC recipients, check the above
mentioned configuration.</p></blockquote></dd><dd></dd>    </dl>
    </div>
            <div class="section" id="mbox">
    <h3>mbox</h3>
            <dl>
                        <dt>$GLOBALS['TYPO3_CONF_VARS']['MAIL']['transport'] = 'mbox';</dt>
        
        <dd>This doesn&#039;t send any email out, but instead will write every outgoing email
to a file adhering to the <a href="https://www.rfc-editor.org/rfc/rfc4155.html">RFC 4155 mbox format</a>, which is a simple text
file where the emails are concatenated. Useful for debugging the email
sending process and on development machines which cannot send emails to the
outside. The file to write to is defined by:</dd>                        <dt>$GLOBALS['TYPO3_CONF_VARS']['MAIL']['transport_mbox_file'] = '</dt>
        
        <dd>The file where to write the emails into. The path must be absolute.</dd>    </dl>
    </div>
            <div class="section" id="classname">
    <h3>&lt;classname&gt;</h3>
            <dl>
                        <dt>$GLOBALS['TYPO3_CONF_VARS']['MAIL']['transport'] = '</dt>
        
        <dd>Custom class which implements
\Symfony\Component\Mailer\Transport\TransportInterface.
The constructor receives all settings from the <code>MAIL</code> section to make it
possible to add custom settings.</dd><dd></dd>    </dl>
    </div>
    </div>
            <div class="section" id="validators">
    <h2>Validators</h2>
            <p>Using additional validators can help to identify if a provided email address
is valid or not. By default, the validator
\Egulias\EmailValidator\Validation\RFCValidation is used. The following
validators are available:</p>
            

<ul>
    <li class="dash">\Egulias\EmailValidator\Validation\DNSCheckValidation</li>
    <li class="dash">\Egulias\EmailValidator\Validation\SpoofCheckValidation</li>
    <li class="dash">\Egulias\EmailValidator\Validation\NoRFCWarningsValidation</li>
</ul>
            <p>Additionally, it is possible to provide an own implementation by implementing
the interface \Egulias\EmailValidator\Validation\EmailValidation.</p>
            <p>If multiple validators are provided, each validator must return true.</p>
            <p>Example:</p>
            <pre><code class="language-php">$GLOBALS[&#039;TYPO3_CONF_VARS&#039;][&#039;MAIL&#039;][&#039;validators&#039;] = [
    \Egulias\EmailValidator\Validation\RFCValidation::class,
    \Egulias\EmailValidator\Validation\DNSCheckValidation::class
];</code></pre>
    </div>
    </div>
<div class="section" id="spooling">
    <h1>Spooling</h1>
            <p>The default behavior of the TYPO3 mailer is to send the email messages
immediately. However, you may want to avoid the performance hit of the
communication to the email server, which could cause the user to wait for the
next page to load while the email is being sent. This can be avoided by choosing
to &quot;spool&quot; the emails instead of sending them directly.</p>
            <div class="section" id="spooling-in-memory">
    <h2>Spooling in memory</h2>
            <pre><code class="language-php">$GLOBALS[&#039;TYPO3_CONF_VARS&#039;][&#039;MAIL&#039;][&#039;transport_spool_type&#039;] = &#039;memory&#039;;</code></pre>
            <p>When you use spooling to store the emails to memory, they will get sent right
before the kernel terminates. This means the email only gets sent if the whole
request got executed without any unhandled exception or any errors.</p>
    </div>
            <div class="section" id="spooling-using-files">
    <h2>Spooling using files</h2>
            <pre><code class="language-php">$GLOBALS[&#039;TYPO3_CONF_VARS&#039;][&#039;MAIL&#039;][&#039;transport_spool_type&#039;] = &#039;file&#039;;
$GLOBALS[&#039;TYPO3_CONF_VARS&#039;][&#039;MAIL&#039;][&#039;transport_spool_filepath&#039;] = &#039;/folder/of/choice&#039;;</code></pre>
            <p>When using the filesystem for spooling, you need to define in which folder TYPO3
stores the spooled files. This folder will contain files for each email in the
spool. So make sure this directory is writable by TYPO3 and not accessible to
the world (outside of the webroot).</p>
            <p>Additional notes about the mail spool path:</p>
            

<ul>
    <li>If the path is absolute, the path must either start with the root path of
the TYPO3 project or the public web folder path</li>
    <li>If the path is relative, the public web path is prepended to the path</li>
    <li>The path must not contain symlinks (important for environments with auto
deployment)</li>
    <li>The path must not contain <code>//</code>, <code>..</code> or <code>\</code></li>
</ul>
    </div>
            <div class="section" id="sending-spooled-mails">
    <h2>Sending spooled mails</h2>
            <p>To send the spooled emails you need to run the following CLI command:</p>
            <blockquote><blockquote><pre><code class="language-bash">vendor/bin/typo3 mailer:spool:send</code></pre></blockquote><blockquote><pre><code class="language-bash">typo3/sysext/core/bin/typo3 mailer:spool:send</code></pre></blockquote></blockquote>
            <p>This command can be set up to be run periodically using the
TYPO3 Scheduler.</p>
    </div>
    </div>
<div class="section" id="how-to-create-and-send-emails">
    <h1>How to create and send emails</h1>
            <p>There are two ways to send emails in TYPO3 based on the Symfony API:</p>
            
    
<ol>
    <li>With Fluid, using \TYPO3\CMS\Core\Mail\FluidEmail</li>
    <li>Without Fluid, using \TYPO3\CMS\Core\Mail\MailMessage</li>
</ol>
            <p>\TYPO3\CMS\Core\Mail\MailMessage and \TYPO3\CMS\Core\Mail\FluidEmail
inherit from Symfony\Component\Mime\Email and have a similar API.
<strong>FluidEmail</strong> is specific for sending emails based on Fluid.</p>
            <p>Either method can be used to send emails with HTML content, text content or both
(HTML and text).</p>
            <div class="section" id="send-email-with-fluidemail">
    <h2>Send email with FluidEmail</h2>
            <p>This sends an email using a Fluid template TipsAndTricks.html, make
sure the paths are setup as described in mail-configuration-fluid:</p>
            <pre><code class="language-php">use Symfony\Component\Mime\Address;
use TYPO3\CMS\Core\Mail\FluidEmail;
use TYPO3\CMS\Core\Mail\MailerInterface;

$email = GeneralUtility::makeInstance(FluidEmail::class);
$email
    -&gt;to(&#039;contact@example.org&#039;)
    -&gt;from(new Address(&#039;jeremy@example.org&#039;, &#039;Jeremy&#039;))
    -&gt;subject(&#039;TYPO3 loves you - here is why&#039;)
    -&gt;format(FluidEmail::FORMAT_BOTH) // send HTML and plaintext mail
    -&gt;setTemplate(&#039;TipsAndTricks&#039;)
    -&gt;assign(&#039;mySecretIngredient&#039;, &#039;Tomato and TypoScript&#039;);
GeneralUtility::makeInstance(MailerInterface::class)-&gt;send($email);</code></pre>
            <dl>
                        <dt>Until TYPO3 v12.0 the \TYPO3\CMS\Core\Mail\Mailer class</dt>
        
        <dd>implementation has to be retrieved/injected to send an email. Since TYPO3
v12.1 it is recommended to use \TYPO3\CMS\Core\Mail\MailerInterface
instead to be able to use custom mailer implementations.</dd>    </dl>
            <p>A file TipsAndTricks.html must exist in one of the paths defined in
$GLOBALS['TYPO3_CONF_VARS']['MAIL']['templateRootPaths'] for sending the
HTML content. For sending plaintext content, a file TipsAndTricks.txt
should exist.</p>
            <p>Defining a custom email subject in a custom Fluid template:</p>
            <pre><code class="language-html">&lt;f:section name=&quot;Subject&quot;&gt;New Login at &quot;{typo3.sitename}&quot;&lt;/f:section&gt;</code></pre>
            <p>Building templated emails with Fluid also allows to define the language key,
and use this within the Fluid template:</p>
            <pre><code class="language-php">$email = GeneralUtility::makeInstance(FluidEmail::class);
$email
    -&gt;to(&#039;contact@example.org&#039;)
    -&gt;assign(&#039;language&#039;, &#039;de&#039;);</code></pre>
            <p>In Fluid, you can now use the defined language key (&quot;language&quot;):</p>
            <pre><code class="language-html">&lt;f:translate languageKey=&quot;{language}&quot; id=&quot;LLL:EXT:my_ext/Resources/Private/Language/emails.xml:subject&quot; /&gt;</code></pre>
    </div>
            <div class="section" id="send-email-with-mailmessage">
    <h2>Send email with MailMessage</h2>
            <p>MailMessage can be used to generate and send an email without using
Fluid:</p>
            <pre><code class="language-php">use Symfony\Component\Mime\Address;
use TYPO3\CMS\Core\Mail\MailMessage;
use TYPO3\CMS\Core\Utility\GeneralUtility;

// Create the message
$mail = GeneralUtility::makeInstance(MailMessage::class);

// Prepare and send the message
$mail
    // Defining the &quot;From&quot; email address and name as an object
    // (email clients will display the name)
    -&gt;from(new Address(&#039;john.doe@example.org&#039;, &#039;John Doe&#039;))

    // Set the &quot;To&quot; addresses
    -&gt;to(
        new Address(&#039;receiver@example.org&#039;, &#039;Max Mustermann&#039;),
        new Address(&#039;other@example.org&#039;)
    )

    // Give the message a subject
    -&gt;subject(&#039;Your subject&#039;)

    // Give it the text message
    -&gt;text(&#039;Here is the message itself&#039;)

    // And optionally an HTML message
    -&gt;html(&#039;&lt;p&gt;Here is the message itself&lt;/p&gt;&#039;)

    // Optionally add any attachments
    -&gt;attachFromPath(&#039;/path/to/my-document.pdf&#039;)

    // And finally send it
    -&gt;send()
;</code></pre>
            <p>Or, if you prefer, do not concatenate the calls:</p>
            <pre><code class="language-php">use Symfony\Component\Mime\Address;
use TYPO3\CMS\Core\Utility\GeneralUtility;
use TYPO3\CMS\Core\Mail\MailMessage;

$mail = GeneralUtility::makeInstance(MailMessage::class);
$mail-&gt;from(new Address(&#039;john.doe@example.org&#039;, &#039;John Doe&#039;));
$mail-&gt;to(
    new Address(&#039;receiver@example.org&#039;, &#039;Max Mustermann&#039;),
    new Address(&#039;other@example.org&#039;)
);
$mail-&gt;subject(&#039;Your subject&#039;);
$mail-&gt;text(&#039;Here is the message itself&#039;);
$mail-&gt;html(&#039;&lt;p&gt;Here is the message itself&lt;/p&gt;&#039;);
$mail-&gt;attachFromPath(&#039;/path/to/my-document.pdf&#039;);
$mail-&gt;send();</code></pre>
            <div class="phpdocumentor-admonition -note">
            <svg class="phpdocumentor-admonition__icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"></path></svg>
                    <article>
        <p>Before TYPO3 v10 the MailMessage class only had methods like
-setTo(), setFrom(), -setSubject() etc.
Now the class inherits from \Symfony\Component\Mime\Email which
provides the methods from the example. To make migration from older TYPO3
versions easier the previous methods still exist. The use of
MailMessage in own extensions is recommended.</p>

    </article>
</div>
    </div>
    </div>
<div class="section" id="how-to-add-attachments">
    <h1>How to add attachments</h1>
            <p>Attach files that exist in your file system:</p>
            <pre><code class="language-php">// Attach file to message
$mail-&gt;attachFromPath(&#039;/path/to/documents/privacy.pdf&#039;);

// Optionally you can tell email clients to display a custom name for the file
$mail-&gt;attachFromPath(&#039;/path/to/documents/privacy.pdf&#039;, &#039;Privacy Policy&#039;);

// Alternatively attach contents from a stream
$mail-&gt;attach(fopen(&#039;/path/to/documents/contract.doc&#039;, &#039;r&#039;));</code></pre>
    </div>
<div class="section" id="how-to-add-inline-media">
    <h1>How to add inline media</h1>
            <p>Add some inline media like images in an email:</p>
            <pre><code class="language-php">// Get the image contents from a PHP resource
$mail-&gt;embed(fopen(&#039;/path/to/images/logo.png&#039;, &#039;r&#039;), &#039;logo&#039;);

// Get the image contents from an existing file
$mail-&gt;embedFromPath(&#039;/path/to/images/signature.png&#039;, &#039;footer-signature&#039;);

// reference images using the syntax &#039;cid:&#039; + &quot;image embed name&quot;
$mail-&gt;html(&#039;&lt;img src=&quot;cid:logo&quot;&gt; ... &lt;img src=&quot;cid:footer-signature&quot;&gt; ...&#039;);</code></pre>
    </div>
<div class="section" id="how-to-set-and-use-a-default-sender">
    <h1>How to set and use a default sender</h1>
            <p>It is possible to define a default email sender (&quot;FromAdmin Tools  Settings  Configure Installation-Wide Options:</p>
            <pre><code class="language-php">$GLOBALS[&#039;TYPO3_CONF_VARS&#039;][&#039;MAIL&#039;][&#039;defaultMailFromAddress&#039;] = &#039;john.doe@example.org&#039;;
$GLOBALS[&#039;TYPO3_CONF_VARS&#039;][&#039;MAIL&#039;][&#039;defaultMailFromName&#039;] = &#039;John Doe&#039;;</code></pre>
            <p>This is how you can use these defaults:</p>
            <pre><code class="language-php">use TYPO3\CMS\Core\Mail\MailMessage;
use TYPO3\CMS\Core\Utility\GeneralUtility;
use TYPO3\CMS\Core\Utility\MailUtility;

$from = MailUtility::getSystemFrom();
$mail = GeneralUtility::makeInstance(MailMessage::class);

// As getSystemFrom() returns an array we need to use the setFrom method
$mail-&gt;setFrom($from);
// ...
$mail-&gt;send();</code></pre>
            <p>In case of the problem &quot;Mails are not sent&quot; in your extension, try to set a
<code>ReturnPath:</code>. Start as before but add:</p>
            <pre><code class="language-php">use TYPO3\CMS\Core\Utility\MailUtility;

// You will get a valid email address from &#039;defaultMailFromAddress&#039; or if
// not set from PHP settings or from system.
// If result is not a valid email address, the final result will be
// no-reply@example.org.
$returnPath = MailUtility::getSystemFromAddress();
if ($returnPath != &quot;no-reply@example.org&quot;) {
    $mail-&gt;setReturnPath($returnPath);
}
$mail-&gt;send();</code></pre>
    </div>
<div class="section" id="register-a-custom-mailer">
    <h1>Register a custom mailer</h1>
            <p>To be able to use a custom mailer implementation in TYPO3, the interface
\TYPO3\CMS\Core\Mail\MailerInterface is available, which extends
\Symfony\Component\Mailer\MailerInterface. By default,
\TYPO3\CMS\Core\Mail\Mailer is registered as implementation.</p>
            <p>After implementing your custom mailer, add the following lines into the
Configuration/Services.yaml file to ensure that your custom
mailer is used.</p>
            <pre><code class="language-yaml">TYPO3\CMS\Core\Mail\MailerInterface:
    alias: MyVendor\SitePackage\Mail\MyCustomMailer</code></pre>
    </div>
<div class="section" id="psr-14-events-on-sending-messages">
    <h1>PSR-14 events on sending messages</h1>
            <p>Some PSR-14 events are available:</p>
            

<ul>
    <li class="dash">AfterMailerInitializationEvent to add custom mailing settings.</li>
    <li class="dash">BeforeMailerSentMessageEvent to manipulate messages before they are
sent by the mailer.</li>
    <li class="dash">AfterMailerSentMessageEvent to further process a sent message.</li>
</ul>
    </div>
<div class="section" id="symfony-mail-documentation">
    <h1>Symfony mail documentation</h1>
            <p>Please refer to the Symfony documentation for more information about
available methods.</p>
            <div class="phpdocumentor-admonition -seealso">
                        <svg class="phpdocumentor-admonition__icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path></svg>
        <article>
        

<ul>
    <li class="dash"><a href="https://symfony.com/doc/current/components/mime.html">The Mime Component</a></li>
    <li class="dash"><a href="https://symfony.com/doc/current/mailer.html">Sending Emails with Mailer</a></li>
</ul>

    </article>
</div>
    </div>

    </section>
                            </div>
            <section data-search-results class="phpdocumentor-search-results phpdocumentor-search-results--hidden">
    <section class="phpdocumentor-search-results__dialog">
        <header class="phpdocumentor-search-results__header">
            <h2 class="phpdocumentor-search-results__title">Search results</h2>
            <button class="phpdocumentor-search-results__close"><i class="fas fa-times"></i></button>
        </header>
        <section class="phpdocumentor-search-results__body">
            <ul class="phpdocumentor-search-results__entries"></ul>
        </section>
    </section>
</section>
        </div>
        <a href="guide/ApiOverview/Mail/Index.html#top" class="phpdocumentor-back-to-top"><i class="fas fa-chevron-circle-up"></i></a>

    </main>

    <script>
        cssVars({});
    </script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/prism.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/plugins/line-numbers/prism-line-numbers.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/plugins/line-highlight/prism-line-highlight.min.js"></script>
</body>
</html>