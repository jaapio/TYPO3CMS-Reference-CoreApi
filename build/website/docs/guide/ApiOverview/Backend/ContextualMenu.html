<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
                    <title>phpDocumentor</title>
    

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <base href="../../../">
    <link rel="icon" href="images/favicon.ico"/>
    <link rel="stylesheet" href="css/normalize.css">
    <link rel="stylesheet" href="css/base.css">
            <link rel="preconnect" href="https://fonts.gstatic.com">
        <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@100;200;300;400;600;700&display=swap" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:wght@400;600;700&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="css/template.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.0/css/all.min.css" integrity="sha256-ybRkN9dBjhcS2qrW1z+hfCxq+1aBdwyQM5wlQoQVt/0=" crossorigin="anonymous" />
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/themes/prism-okaidia.css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/plugins/line-numbers/prism-line-numbers.css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/plugins/line-highlight/prism-line-highlight.css">
                <script src="https://cdn.jsdelivr.net/npm/fuse.js@3.4.6"></script>
        <script src="https://cdn.jsdelivr.net/npm/css-vars-ponyfill@2"></script>
        <script src="js/template.js"></script>
        <script src="js/search.js"></script>
        <script defer src="js/searchIndex.js"></script>
    </head>
<body id="top">
    <header class="phpdocumentor-header phpdocumentor-section">
    <h1 class="phpdocumentor-title"><a href="" class="phpdocumentor-title__link">phpDocumentor</a></h1>
    <input class="phpdocumentor-header__menu-button" type="checkbox" id="menu-button" name="menu-button" />
    <label class="phpdocumentor-header__menu-icon" for="menu-button">
        <i class="fas fa-bars"></i>
    </label>
    <section data-search-form class="phpdocumentor-search">
    <label>
        <span class="visually-hidden">Search for</span>
        <svg class="phpdocumentor-search__icon" width="21" height="20" viewBox="0 0 21 20" fill="none" xmlns="http://www.w3.org/2000/svg">
            <circle cx="7.5" cy="7.5" r="6.5" stroke="currentColor" stroke-width="2"/>
            <line x1="12.4892" y1="12.2727" x2="19.1559" y2="18.9393" stroke="currentColor" stroke-width="3"/>
        </svg>
        <input type="search" class="phpdocumentor-field phpdocumentor-search__field" placeholder="Loading .." disabled />
    </label>
</section>

    <nav class="phpdocumentor-topnav">
    <ul class="phpdocumentor-topnav__menu">
        </ul>
</nav>
</header>

    <main class="phpdocumentor">
        <div class="phpdocumentor-section">
            <input class="phpdocumentor-sidebar__menu-button" type="checkbox" id="sidebar-button" name="sidebar-button" />
<label class="phpdocumentor-sidebar__menu-icon" for="sidebar-button">
    Menu
</label>
<aside class="phpdocumentor-column -three phpdocumentor-sidebar">
                    <section class="phpdocumentor-sidebar__category">
            <h2 class="phpdocumentor-sidebar__category-header">typo3-explained</h2>
                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="guide/Introduction/Index.html#introduction" class="">Introduction</a>
</h4>
    <ul class="phpdocumentor-list">
                    <li>
                <a href="guide/Introduction/Index.html#system-overview-1" class="">System Overview</a>
                
            </li>
                    <li>
                <a href="guide/Introduction/Index.html#a-basic-installation" class="">A basic installation</a>
                
            </li>
            </ul>

                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="guide/ApiOverview/Index.html#api-a-z" class="">API A-Z</a>
</h4>

                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="guide/CodingGuidelines/Index.html#cgl" class="">Coding Guidelines</a>
</h4>
    <ul class="phpdocumentor-list">
                    <li>
                <a href="guide/CodingGuidelines/Introduction.html#cgl-introduction" class="">Introduction</a>
                
            </li>
                    <li>
                <a href="guide/CodingGuidelines/CglPhp/Index.html#cgl-php" class="">PHP Coding Guidelines</a>
                
            </li>
                    <li>
                <a href="guide/CodingGuidelines/CglJavaScript/Index.html#cgl-javascript" class="">JavaScript Coding Guidelines</a>
                
            </li>
                    <li>
                <a href="guide/CodingGuidelines/CglTypeScript/Index.html#cgl-typescript" class="">TypeScript Coding Guidelines</a>
                
            </li>
                    <li>
                <a href="guide/CodingGuidelines/CglTypoScript/Index.html#cgl-typoscript" class="">TypoScript Coding Guidelines</a>
                
            </li>
                    <li>
                <a href="guide/CodingGuidelines/CglTsConfig.html#cgl-tsconfig" class="">TSconfig Coding Guidelines</a>
                
            </li>
                    <li>
                <a href="guide/CodingGuidelines/CglXliff/Index.html#cgl-xliff" class="">Xliff Coding Guidelines</a>
                
            </li>
                    <li>
                <a href="guide/CodingGuidelines/CglYaml.html#cgl-yaml" class="">Yaml Coding Guidelines</a>
                
            </li>
                    <li>
                <a href="guide/CodingGuidelines/CglRest/Index.html#cgl-rest" class="">reStructuredText (reST)</a>
                
            </li>
            </ul>

                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="guide/Configuration/Index.html#configuration" class="">Configuration</a>
</h4>
    <ul class="phpdocumentor-list">
                    <li>
                <a href="guide/Configuration/ConfigurationOverview.html#config-overview" class="">Configuration overview</a>
                
            </li>
                    <li>
                <a href="guide/Configuration/Glossary.html#configuration-classification" class="">Glossary</a>
                
            </li>
                    <li>
                <a href="guide/Configuration/ConfigurationFiles.html#configuration-files" class="">Configuration files</a>
                
            </li>
                    <li>
                <a href="guide/Configuration/ConfigurationModule/Index.html#configuration-module" class="">Configuration module</a>
                
            </li>
                    <li>
                <a href="guide/Configuration/FeatureToggles.html#feature-toggles" class="">Feature toggles</a>
                
            </li>
                    <li>
                <a href="guide/Configuration/GlobalVariables.html#globals-variables" class="">$GLOBALS</a>
                
            </li>
                    <li>
                <a href="guide/Configuration/Typo3ConfVars/Index.html#typo3-conf-vars" class="">TYPO3_CONF_VARS</a>
                
            </li>
                    <li>
                <a href="guide/Configuration/Typo3Information.html#typo3Information" class="">Global meta information about TYPO3</a>
                
            </li>
                    <li>
                <a href="guide/Configuration/Tsconfig.html#tsconfig" class="">TSconfig</a>
                
            </li>
                    <li>
                <a href="guide/Configuration/TypoScriptSyntax/Index.html#typoscript-syntax-about" class="">TypoScript syntax</a>
                
            </li>
                    <li>
                <a href="guide/Configuration/UserSettingsConfiguration/Index.html#user-settings" class="">User settings configuration</a>
                
            </li>
                    <li>
                <a href="guide/Configuration/Yaml/Index.html#yaml" class="">YAML</a>
                
            </li>
            </ul>

                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="guide/ExtensionArchitecture/Index.html#extension-development" class="">Extension development</a>
</h4>
    <ul class="phpdocumentor-list">
                    <li>
                <a href="guide/ExtensionArchitecture/Concepts/Index.html#extension-concepts" class="">Concepts</a>
                
            </li>
                    <li>
                <a href="guide/ExtensionArchitecture/FileStructure/Index.html#extension-reserved-folders-legacy" class="">File structure</a>
                
            </li>
                    <li>
                <a href="guide/ExtensionArchitecture/HowTo/Index.html#extension-howto" class="">Howto</a>
                
            </li>
                    <li>
                <a href="guide/ExtensionArchitecture/Extbase/Index.html#extbase" class="">Extbase</a>
                
            </li>
                    <li>
                <a href="guide/ExtensionArchitecture/BestPractises/Index.html#extension-Best-practises" class="">Best practises and conventions</a>
                
            </li>
                    <li>
                <a href="guide/ExtensionArchitecture/Tutorials/Index.html#extension-tutorials" class="">Tutorials</a>
                
            </li>
            </ul>

                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="guide/Security/Index.html#security" class="">Security guidelines</a>
</h4>
    <ul class="phpdocumentor-list">
                    <li>
                <a href="guide/Security/Introduction/Index.html#security-introduction" class="">Introduction</a>
                
            </li>
                    <li>
                <a href="guide/Security/SecurityTeam/Index.html#security-team" class="">The TYPO3 Security Team</a>
                
            </li>
                    <li>
                <a href="guide/Security/GeneralInformation/Index.html#security-general-information" class="">General Information</a>
                
            </li>
                    <li>
                <a href="guide/Security/TypesOfThreats/Index.html#security-threats" class="">Types of Security Threats</a>
                
            </li>
                    <li>
                <a href="guide/Security/GeneralGuidelines/Index.html#security-general-guidelines" class="">General guidelines</a>
                
            </li>
                    <li>
                <a href="guide/Security/GuidelinesAdministrators/Index.html#security-administrators" class="">Guidelines for System Administrators</a>
                
            </li>
                    <li>
                <a href="guide/Security/GuidelinesExtensionDevelopment/Index.html#security-extension-development" class="">Guidelines for extension development</a>
                
            </li>
                    <li>
                <a href="guide/Security/GuidelinesIntegrators/Index.html#security-integrators" class="">Guidelines for TYPO3 integrators</a>
                
            </li>
                    <li>
                <a href="guide/Security/GuidelinesEditors/Index.html#security-editors" class="">Guidelines for editors</a>
                
            </li>
                    <li>
                <a href="guide/Security/Backups/Index.html#security-backups" class="">Backup strategy</a>
                
            </li>
                    <li>
                <a href="guide/Security/HackedSite/Index.html#security-detect-analyze-repair" class="">Detect, analyze and repair a hacked site</a>
                
            </li>
            </ul>

                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="guide/Testing/Index.html#testing" class="">Testing</a>
</h4>
    <ul class="phpdocumentor-list">
                    <li>
                <a href="guide/Testing/History.html#testing-history" class="">History</a>
                
            </li>
                    <li>
                <a href="guide/Testing/CoreTesting.html#testing-core" class="">Core testing</a>
                
            </li>
                    <li>
                <a href="guide/Testing/ExtensionTesting.html#testing-extensions" class="">Extension testing</a>
                
            </li>
                    <li>
                <a href="guide/Testing/ProjectTesting.html#testing-projects" class="">Project testing</a>
                
            </li>
                    <li>
                <a href="guide/Testing/WritingUnit.html#testing-writing-unit" class="">Writing unit tests</a>
                
            </li>
                    <li>
                <a href="guide/Testing/WritingFunctional.html#testing-writing-functional" class="">Writing functional tests</a>
                
            </li>
                    <li>
                <a href="guide/Testing/WritingAcceptance.html#testing-writing-acceptance" class="">Writing acceptance tests</a>
                
            </li>
                    <li>
                <a href="guide/Testing/Faq.html#testing-faq" class="">FAQ</a>
                
            </li>
            </ul>

                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="guide/About.html#about" class="">About This Manual</a>
</h4>
    <ul class="phpdocumentor-list">
                    <li>
                <a href="guide/About.html#intended-audience" class="">Intended Audience</a>
                
            </li>
                    <li>
                <a href="guide/About.html#code-examples-1" class="">Code examples</a>
                
            </li>
                    <li>
                <a href="guide/About.html#feedback-and-contribute" class="">Feedback and Contribute</a>
                
            </li>
                    <li>
                <a href="guide/About.html#credits-1" class="">Credits</a>
                
            </li>
                    <li>
                <a href="guide/About.html#dedication-1" class="">Dedication</a>
                
            </li>
            </ul>

                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="guide/Sitemap.html#sitemap" class="">Sitemap</a>
</h4>

                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="guide/genindex.html#index" class="">Index</a>
</h4>

                        </section>
            
    <section class="phpdocumentor-sidebar__category">
        <h2 class="phpdocumentor-sidebar__category-header">Reports</h2>
                <h3 class="phpdocumentor-sidebar__root-package"><a href="reports/deprecated.html">Deprecated</a></h3>
        <h3 class="phpdocumentor-sidebar__root-package"><a href="reports/errors.html">Errors</a></h3>
        <h3 class="phpdocumentor-sidebar__root-package"><a href="reports/markers.html">Markers</a></h3>
    </section>

    <section class="phpdocumentor-sidebar__category">
        <h2 class="phpdocumentor-sidebar__category-header">Indices</h2>
        <h3 class="phpdocumentor-sidebar__root-package"><a href="indices/files.html">Files</a></h3>
    </section>
</aside>

            <div class="phpdocumentor-column -nine phpdocumentor-content">
                                        <section>
        
<a id="csm"></a>
<div class="section" id="context-menu">
    <h1>Context-sensitive menus</h1>
            <p>Contextual menus exist in many places in the TYPO3 backend. Just try your
luck clicking on any <strong>icon</strong> that you see. Chances are good that a contextual
menu will appear, offering useful functions to execute.</p>
            <figure>
    <img
    src="./Images/AutomaticScreenshots/Examples/ContextualMenuExtended/ContextMenuTtContent.png"
                alt="The context menu now contains an additional item &quot;Hello World&quot;"        />

            
                    <figcaption><p>The context menu shown after clicking on the Content Element icon</p>
</figcaption>
            </figure>

            <a id="csm-implementation"></a>
    </div>
<div class="section" id="context-menu-rendering-flow">
    <h1>Context menu rendering flow</h1>
            <div class="section" id="markup">
    <h2>Markup</h2>
            <p>The context menu is shown after clicking on the HTML element which has
class="t3js-contextmenutrigger" together with data-table,
data-uid and optional data-context attributes.</p>
            <p>The JavaScript click event handler is implemented in the
ES6 module @typo3/backend/context-menu.js. It takes the
data attributes mentioned above and executes an Ajax call to the
\TYPO3\CMS\Backend\Controller\ContextMenuController-getContextMenuAction().</p>
            <dl>
                        <dt>The RequireJS module TYPO3/CMS/Backend/ContextMenu has been migrated</dt>
        
        <dd>to the ES6 module @typo3/backend/context-menu.js.
See also backend-javascript-es6.</dd>    </dl>
    </div>
            <div class="section" id="contextmenucontroller">
    <h2>ContextMenuController</h2>
            <p>ContextMenuController asks \TYPO3\CMS\Backend\ContextMenu\ContextMenu
to generate an array of items. ContextMenu builds a list of available
item providers by asking each whether it can provide items
($provider-canHandle()), and what priority it has
($provider-getPriority()).</p>
            <div class="section" id="item-providers-registration">
    <h3>Item providers registration</h3>
            <dl>
                        <dt>ContextMenu item providers, implementing</dt>
        
        <dd>\TYPO3\CMS\Backend\ContextMenu\ItemProviders\ProviderInterface
are now automatically registered. The registration via
$GLOBALS['TYPO3_CONF_VARS']['BE']['ContextMenu']['ItemProviders']
is not evaluated anymore.</dd>    </dl>
            <p>Custom item providers must implement
\TYPO3\CMS\Backend\ContextMenu\ItemProviders\ProviderInterface and can
extend \TYPO3\CMS\Backend\ContextMenu\ItemProviders\AbstractProvider.</p>
            <p>They are then automatically registered by adding the backend.contextmenu.itemprovider
tag, if autoconfigure is enabled in Services.yaml. The class
\TYPO3\CMS\Backend\ContextMenu\ItemProviders\ItemProvidersRegistry then
automatically receives those services and registers them.</p>
            <p>If autoconfigure is
not enabled in your Configuration/Services.(yaml|php) file,
manually configure your item providers with the
backend.contextmenu.itemprovider tag.</p>
            <p>There are two item providers which are always available:</p>
            

<ul>
    <li class="dash">\TYPO3\CMS\Backend\ContextMenu\ItemProviders\PageProvider</li>
    <li class="dash">\TYPO3\CMS\Backend\ContextMenu\ItemProviders\RecordProvider</li>
</ul>
    </div>
            <div class="section" id="gathering-items">
    <h3>Gathering items</h3>
            <p>A list of providers is sorted by priority, and then each provider is asked to
add items. The generated array of items is passed from an item provider with
higher priority to a provider with lower priority.</p>
            <p>After that, a compiled list of items is returned to the
ContextMenuController which passes it back to the
ContextMenu.js as JSON.</p>
    </div>
    </div>
            <div class="section" id="menu-rendering-in-javascript">
    <h2>Menu rendering in JavaScript</h2>
            <dl>
                        <dt>The RequireJS module TYPO3/CMS/Backend/ContextMenuActions has been migrated</dt>
        
        <dd>to the ES6 module @typo3/backend/context-menu-actions.js.
See also backend-javascript-es6.</dd>    </dl>
            <p>Based on the JSON data context-menu.js is rendering a context menu. If
one of the items is clicked, the according JavaScript callbackAction is
executed on the ES6 module @typo3/backend/context-menu-actions.js
or other modules defined in the JSON as additionalAttributes['data-callback-module'].</p>
            <p>Example of the JSON response:</p>
            <pre><code class="language-javascript">{
   &quot;view&quot;:{
      &quot;type&quot;:&quot;item&quot;,
      &quot;label&quot;:&quot;Show&quot;,
      &quot;icon&quot;:&quot;&lt;span class=\&quot;t3js-icon icon icon-size-small icon-state-default icon-actions-document-view\&quot; data-identifier=\&quot;actions-document-view\&quot;&gt;\n\t&lt;span class=\&quot;icon-markup\&quot;&gt;\n&lt;img src=\&quot;\/typo3\/sysext\/core\/Resources\/Public\/Icons\/T3Icons\/actions\/actions-document-view.svg\&quot; width=\&quot;16\&quot; height=\&quot;16\&quot; \/&gt;\n\t&lt;\/span&gt;\n\t\n&lt;\/span&gt;&quot;,
      &quot;additionalAttributes&quot;:{
         &quot;data-preview-url&quot;:&quot;http:\/\/typo37.local\/index.php?id=47&quot;
      },
      &quot;callbackAction&quot;:&quot;viewRecord&quot;
   },
   &quot;edit&quot;:{
      &quot;type&quot;:&quot;item&quot;,
      &quot;label&quot;:&quot;Edit&quot;,
      &quot;icon&quot;:&quot;&quot;,
      &quot;additionalAttributes&quot;:[
      ],
      &quot;callbackAction&quot;:&quot;editRecord&quot;
   },
   &quot;divider1&quot;:{
      &quot;type&quot;:&quot;divider&quot;,
      &quot;label&quot;:&quot;&quot;,
      &quot;icon&quot;:&quot;&quot;,
      &quot;additionalAttributes&quot;:[

      ],
      &quot;callbackAction&quot;:&quot;&quot;
   },
   &quot;more&quot;:{
      &quot;type&quot;:&quot;submenu&quot;,
      &quot;label&quot;:&quot;More options...&quot;,
      &quot;icon&quot;:&quot;&quot;,
      &quot;additionalAttributes&quot;:[

      ],
      &quot;callbackAction&quot;:&quot;openSubmenu&quot;,
      &quot;childItems&quot;:{
         &quot;newWizard&quot;:{
            &quot;type&quot;:&quot;item&quot;,
            &quot;label&quot;:&quot;&#039;Create New&#039; wizard&quot;,
            &quot;icon&quot;:&quot;&quot;,
            &quot;additionalAttributes&quot;:{
            },
            &quot;callbackAction&quot;:&quot;newContentWizard&quot;
         }
      }
   }
}</code></pre>
    </div>
    </div>
<div class="section" id="api-usage-in-the-core">
    <h1>API usage in the Core</h1>
            <p>Several TYPO3 Core modules are already using this API for adding or modifying
items. See following places for a reference:</p>
            

<ul>
    <li>EXT\TYPO3\CMS\Impexp\ContextMenu\ItemProvider and ES6 module
@typo3/impexp/context-menu-actions.js.</li>
    <li>EXT\TYPO3\CMS\Filelist\ContextMenu\ItemProviders\FileDragProvider,
\TYPO3\CMS\Filelist\ContextMenu\ItemProviders\FileProvider,
\TYPO3\CMS\Filelist\ContextMenu\ItemProviders\FileStorageProvider,
\TYPO3\CMS\Filelist\ContextMenu\ItemProviders\FilemountsProvider
and the ES6 module @typo3/filelist/context-menu-actions.js</li>
</ul>
    </div>
<div class="section" id="adding-context-menu-to-elements-in-your-backend-module">
    <h1>Adding context menu to elements in your backend module</h1>
            <p>Enabling context menu in your own backend modules is quite straightforward.
The examples below are taken from the &quot;beuser&quot; system extension and
assume that the module is Extbase-based.</p>
            <p>The first step is to include the needed JavaScript using the
includeRequireJsModules property
of the standard backend container Fluid view helper (or backend page
renderer view helper).</p>
            <p>Doing so in your layout is sufficient (see
typo3/sysext/beuser/Resources/Private/Layouts/Default.html).</p>
            <pre><code class="language-xml">&lt;f:be.container includeRequireJsModules=&quot;{0:&#039;TYPO3/CMS/Backend/ContextMenu&#039;}&quot;&gt;
   // ...
&lt;/f:be.container&gt;</code></pre>
            <p>The second step is to activate the context menu on the icons. This kind of markup
is required (taken from
typo3/sysext/beuser/Resources/Private/Templates/BackendUser/Index.html):</p>
            <pre><code class="language-xml">&lt;td&gt;
   &lt;a href=&quot;#&quot; class=&quot;t3js-contextmenutrigger&quot; data-table=&quot;be_users&quot;
         data-uid=&quot;{compareUser.uid}&quot; title=&quot;id={compareUser.uid}&quot;&gt;
      &lt;be:avatar backendUser=&quot;{compareUser.uid}&quot; showIcon=&quot;TRUE&quot; /&gt;
   &lt;/a&gt;
&lt;/td&gt;</code></pre>
            <p>the relevant line being highlighted. The class t3js-contextmenutrigger
triggers a context menu functionality for the current element. The
data-table attribute contains a table name of the record and
data-uid the uid of the record.</p>
            <p>One additional data attribute can be used data-context with
values being for example tree for context menu triggered from
the page tree. Context is used to hide menu items independently for page tree
independently from other places (disabled items can be configured in TSconfig).</p>
            <div class="phpdocumentor-admonition -note">
            <svg class="phpdocumentor-admonition__icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"></path></svg>
                    <article>
        <p>In most cases the data-uid attributes contain an integer value.
However in case of files and folders this attribute takes file/folder path
as a value like data-uid="1:/some-folder/some-file.pdf"</p>

    </article>
</div>
    </div>
<div class="section" id="disabling-context-menu-items-from-tsconfig">
    <h1>Disabling Context Menu Items from TSConfig</h1>
            <p>Context menu items can be disabled in TSConfig by adding item name to the
options.contextMenu option corresponding to the table and context
you want to cover.</p>
            <p>For example, disabling edit and new items for
table pages use:</p>
            <pre><code class="language-typoscript">options.contextMenu.table.pages.disableItems = edit,new</code></pre>
            <p>If you want to disable the items just for certain context (for example tree)
add the .tree key after table name like that:</p>
            <pre><code class="language-typoscript">options.contextMenu.table.pages.tree.disableItems = edit,new</code></pre>
            <p>If configuration for certain context is available, the default configuration
is not taken into account.</p>
            <p>For more details see TSConfig reference.</p>
            <a id="csm-adding"></a>
    </div>
<div class="section" id="tutorial-how-to-add-a-custom-context-menu-item">
    <h1>Tutorial: How to add a custom context menu item</h1>
            <p>Follow these steps to add a custom menu item for pages records. You will add a
&quot;Hello world&quot; item which will show an info after clicking.</p>
            <figure>
    <img
    src="./Images/AutomaticScreenshots/Examples/ContextualMenuExtended/ContextMenuHelloWorld.png"
                alt="The context menu now contains an additional item &quot;Hello World&quot;"        />

            
                    <figcaption><p>Context menu with custom item</p>
</figcaption>
            </figure>

            <div class="section" id="step-1-implementation-of-the-item-provider-class">
    <h2>Step 1: Implementation of the item provider class</h2>
            <p>Implement your own item provider class. Provider must implement
\TYPO3\CMS\Backend\ContextMenu\ItemProviders\ProviderInterface and
can extend \TYPO3\CMS\Backend\ContextMenu\ItemProviders\AbstractProvider
or any other provider from <a href="EXT:backend">EXT:backend</a>.</p>
            <p>See comments in the following code snippet clarifying implementation details.</p>
            <pre><code class="language-php">&lt;?php

namespace T3docs\Examples\ContextMenu;

/**
 * This file is part of the TYPO3 CMS project.
 *
 * It is free software; you can redistribute it and/or modify it under
 * the terms of the GNU General Public License, either version 2
 * of the License, or any later version.
 *
 * For the full copyright and license information, please read the
 * LICENSE.txt file that was distributed with this source code.
 *
 * The TYPO3 project - inspiring people to share!
 */

use TYPO3\CMS\Backend\ContextMenu\ItemProviders\AbstractProvider;

/**
 * Item provider adding Hello World item
 */
class HelloWorldItemProvider extends AbstractProvider
{
    /**
     * This array contains configuration for items you want to add
     * @var array
     */
    protected $itemsConfiguration = [
        &#039;hello&#039; =&gt; [
            &#039;type&#039; =&gt; &#039;item&#039;,
            &#039;label&#039; =&gt; &#039;Hello World&#039;, // you can use &quot;LLL:&quot; syntax here
            &#039;iconIdentifier&#039; =&gt; &#039;actions-lightbulb-on&#039;,
            &#039;callbackAction&#039; =&gt; &#039;helloWorld&#039;, //name of the function in the JS file
        ],
    ];

    /**
     * Checks if this provider may be called to provide the list of context menu items for given table.
     *
     * @return bool
     */
    public function canHandle(): bool
    {
        // Current table is: $this-&gt;table
        // Current UID is: $this-&gt;identifier
//        return $this-&gt;table === &#039;pages&#039;;
        return true;
    }

    /**
     * Returns the provider priority which is used for determining the order in which providers are processing items
     * to the result array. Highest priority means provider is evaluated first.
     *
     * This item provider should be called after PageProvider which has priority 100.
     *
     * BEWARE: Returned priority should logically not clash with another provider.
     *         Please check @see \TYPO3\CMS\Backend\ContextMenu\ContextMenu::getAvailableProviders() if needed.
     *
     * @return int
     */
    public function getPriority(): int
    {
        return 55;
    }

    /**
     * Registers the additional JavaScript RequireJS callback-module which will allow to display a notification
     * whenever the user tries to click on the &quot;Hello World&quot; item.
     * The method is called from AbstractProvider::prepareItems() for each context menu item.
     *
     * @param string $itemName
     * @return array
     */
    protected function getAdditionalAttributes(string $itemName): array
    {
        return [
            &#039;data-callback-module&#039; =&gt; &#039;@t3docs/examples/context-menu-actions&#039;,
            // Here you can also add any other useful &quot;data-&quot; attribute you&#039;d like to use in your JavaScript (e.g. localized messages)
        ];
    }

    /**
     * This method adds custom item to list of items generated by item providers with higher priority value (PageProvider)
     * You could also modify existing items here.
     * The new item is added after the &#039;info&#039; item.
     *
     * @param array $items
     * @return array
     */
    public function addItems(array $items): array
    {
        $this-&gt;initDisabledItems();
        // renders an item based on the configuration from $this-&gt;itemsConfiguration
        $localItems = $this-&gt;prepareItems($this-&gt;itemsConfiguration);

        if (isset($items[&#039;info&#039;])) {
            //finds a position of the item after which &#039;hello&#039; item should be added
            $position = array_search(&#039;info&#039;, array_keys($items), true);

            //slices array into two parts
            $beginning = array_slice($items, 0, $position+1, true);
            $end = array_slice($items, $position, null, true);

            // adds custom item in the correct position
            $items = $beginning + $localItems + $end;
        } else {
            $items = $items + $localItems;
        }
        //passes array of items to the next item provider
        return $items;
    }

    /**
     * This method is called for each item this provider adds and checks if given item can be added
     *
     * @param string $itemName
     * @param string $type
     * @return bool
     */
    protected function canRender(string $itemName, string $type): bool
    {
        // checking if item is disabled through TSConfig
        if (in_array($itemName, $this-&gt;disabledItems, true)) {
            return false;
        }
        $canRender = false;
        switch ($itemName) {
            case &#039;hello&#039;:
                $canRender = $this-&gt;canSayHello();
                break;
        }
        return $canRender;
    }

    /**
     * Helper method implementing e.g. access check for certain item
     *
     * @return bool
     */
    protected function canSayHello(): bool
    {
        //usually here you can find more sophisticated condition. See e.g. PageProvider::canBeEdited()
        return true;
    }
}</code></pre>

    </div>
            <div class="section" id="step-2-javascript-actions">
    <h2>Step 2: JavaScript actions</h2>
            <p>Provide a JavaScript file (ES6 module) which will be
called after clicking on the context menu item.</p>
            <pre><code class="language-js">/**
 * Module: @t3docs/examples/context-menu-actions
 *
 * JavaScript to handle the click action of the &quot;Hello World&quot; context menu item
 */

class ContextMenuActions {

	helloWorld(table, uid) {
		if (table === &#039;pages&#039;) {
			//If needed, you can access other &#039;data&#039; attributes here from $(this).data(&#039;someKey&#039;)
			//see item provider getAdditionalAttributes method to see how to pass custom data attributes
			top.TYPO3.Notification.error(&#039;Hello World&#039;, &#039;Hi there!&#039;, 5);
		}
	};
}

export default new ContextMenuActions();</code></pre>

            <p>Register the JavaScript ES6 modules of your extension if not done yet:</p>
            <pre><code class="language-php">&lt;?php

return [
    &#039;dependencies&#039; =&gt; [&#039;core&#039;, &#039;backend&#039;],
    &#039;tags&#039; =&gt; [
        &#039;backend.contextmenu&#039;,
    ],
    &#039;imports&#039; =&gt; [
        &#039;@t3docs/examples/&#039; =&gt; &#039;EXT:examples/Resources/Public/JavaScript/&#039;,
    ],
];</code></pre>

    </div>
            <div class="section" id="step-3-registration">
    <h2>Step 3: Registration</h2>
            <p>If you have autoconfigure: true set in your extension&#039;s Services.yaml file all
classes implementing \TYPO3\CMS\Backend\ContextMenu\ItemProviders\ProviderInterface
get registered as context menu items automatically:</p>
            <pre><code class="language-yaml">services:
  _defaults:
    autowire: true
    autoconfigure: true
    public: false</code></pre>
            <p>If autoconfigure is disabled you can manually register a context menu item provider
by adding the tag backend.contextmenu.itemprovider:</p>
            <pre><code class="language-yaml">services:
  _defaults:
    autoconfigure: false

  MyVendor\MyExtension\ContextMenu\SomeItemProvider:
    tags:
      - name: backend.contextmenu.itemprovider</code></pre>

    </div>
    </div>
<div class="section" id="migration-from-binding-this-to-context-menu">
    <h1>Migration from binding this to context menu</h1>
            <dl>
                        <dt>Due to historical reasons, a context menu item was bound to</dt>
        
        <dd><p>this in its callback action which was used to access the
context menu item&#039;s dataset. With TYPO3 v12.0 the invocation of the
assigned callback actions is adapted to pass the dataset as the
third argument.</p><p>Binding the context menu item to this in the callback is marked as
deprecated.</p></dd>    </dl>
            <p>To access data attributes, use the dataset argument passed as the third
argument in the context menu callback action.</p>
            <p>:caption: Before migration (TYPO3 v11)</p>
            <p>:caption: After migration (TYPO3 v12)</p>
    </div>

    </section>
                            </div>
            <section data-search-results class="phpdocumentor-search-results phpdocumentor-search-results--hidden">
    <section class="phpdocumentor-search-results__dialog">
        <header class="phpdocumentor-search-results__header">
            <h2 class="phpdocumentor-search-results__title">Search results</h2>
            <button class="phpdocumentor-search-results__close"><i class="fas fa-times"></i></button>
        </header>
        <section class="phpdocumentor-search-results__body">
            <ul class="phpdocumentor-search-results__entries"></ul>
        </section>
    </section>
</section>
        </div>
        <a href="guide/ApiOverview/Backend/ContextualMenu.html#top" class="phpdocumentor-back-to-top"><i class="fas fa-chevron-circle-up"></i></a>

    </main>

    <script>
        cssVars({});
    </script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/prism.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/plugins/line-numbers/prism-line-numbers.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/plugins/line-highlight/prism-line-highlight.min.js"></script>
</body>
</html>