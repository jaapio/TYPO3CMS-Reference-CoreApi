<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
                    <title>phpDocumentor</title>
    

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <base href="../../../">
    <link rel="icon" href="images/favicon.ico"/>
    <link rel="stylesheet" href="css/normalize.css">
    <link rel="stylesheet" href="css/base.css">
            <link rel="preconnect" href="https://fonts.gstatic.com">
        <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@100;200;300;400;600;700&display=swap" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:wght@400;600;700&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="css/template.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.0/css/all.min.css" integrity="sha256-ybRkN9dBjhcS2qrW1z+hfCxq+1aBdwyQM5wlQoQVt/0=" crossorigin="anonymous" />
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/themes/prism-okaidia.css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/plugins/line-numbers/prism-line-numbers.css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/plugins/line-highlight/prism-line-highlight.css">
                <script src="https://cdn.jsdelivr.net/npm/fuse.js@3.4.6"></script>
        <script src="https://cdn.jsdelivr.net/npm/css-vars-ponyfill@2"></script>
        <script src="js/template.js"></script>
        <script src="js/search.js"></script>
        <script defer src="js/searchIndex.js"></script>
    </head>
<body id="top">
    <header class="phpdocumentor-header phpdocumentor-section">
    <h1 class="phpdocumentor-title"><a href="" class="phpdocumentor-title__link">phpDocumentor</a></h1>
    <input class="phpdocumentor-header__menu-button" type="checkbox" id="menu-button" name="menu-button" />
    <label class="phpdocumentor-header__menu-icon" for="menu-button">
        <i class="fas fa-bars"></i>
    </label>
    <section data-search-form class="phpdocumentor-search">
    <label>
        <span class="visually-hidden">Search for</span>
        <svg class="phpdocumentor-search__icon" width="21" height="20" viewBox="0 0 21 20" fill="none" xmlns="http://www.w3.org/2000/svg">
            <circle cx="7.5" cy="7.5" r="6.5" stroke="currentColor" stroke-width="2"/>
            <line x1="12.4892" y1="12.2727" x2="19.1559" y2="18.9393" stroke="currentColor" stroke-width="3"/>
        </svg>
        <input type="search" class="phpdocumentor-field phpdocumentor-search__field" placeholder="Loading .." disabled />
    </label>
</section>

    <nav class="phpdocumentor-topnav">
    <ul class="phpdocumentor-topnav__menu">
        </ul>
</nav>
</header>

    <main class="phpdocumentor">
        <div class="phpdocumentor-section">
            <input class="phpdocumentor-sidebar__menu-button" type="checkbox" id="sidebar-button" name="sidebar-button" />
<label class="phpdocumentor-sidebar__menu-icon" for="sidebar-button">
    Menu
</label>
<aside class="phpdocumentor-column -three phpdocumentor-sidebar">
                    <section class="phpdocumentor-sidebar__category">
            <h2 class="phpdocumentor-sidebar__category-header">typo3-explained</h2>
                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="guide/Introduction/Index.html#introduction" class="">Introduction</a>
</h4>
    <ul class="phpdocumentor-list">
                    <li>
                <a href="guide/Introduction/Index.html#system-overview-1" class="">System Overview</a>
                
            </li>
                    <li>
                <a href="guide/Introduction/Index.html#a-basic-installation" class="">A basic installation</a>
                
            </li>
            </ul>

                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="guide/ApiOverview/Index.html#api-a-z" class="">API A-Z</a>
</h4>

                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="guide/CodingGuidelines/Index.html#cgl" class="">Coding Guidelines</a>
</h4>
    <ul class="phpdocumentor-list">
                    <li>
                <a href="guide/CodingGuidelines/Introduction.html#cgl-introduction" class="">Introduction</a>
                
            </li>
                    <li>
                <a href="guide/CodingGuidelines/CglPhp/Index.html#cgl-php" class="">PHP Coding Guidelines</a>
                
            </li>
                    <li>
                <a href="guide/CodingGuidelines/CglJavaScript/Index.html#cgl-javascript" class="">JavaScript Coding Guidelines</a>
                
            </li>
                    <li>
                <a href="guide/CodingGuidelines/CglTypeScript/Index.html#cgl-typescript" class="">TypeScript Coding Guidelines</a>
                
            </li>
                    <li>
                <a href="guide/CodingGuidelines/CglTypoScript/Index.html#cgl-typoscript" class="">TypoScript Coding Guidelines</a>
                
            </li>
                    <li>
                <a href="guide/CodingGuidelines/CglTsConfig.html#cgl-tsconfig" class="">TSconfig Coding Guidelines</a>
                
            </li>
                    <li>
                <a href="guide/CodingGuidelines/CglXliff/Index.html#cgl-xliff" class="">Xliff Coding Guidelines</a>
                
            </li>
                    <li>
                <a href="guide/CodingGuidelines/CglYaml.html#cgl-yaml" class="">Yaml Coding Guidelines</a>
                
            </li>
                    <li>
                <a href="guide/CodingGuidelines/CglRest/Index.html#cgl-rest" class="">reStructuredText (reST)</a>
                
            </li>
            </ul>

                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="guide/Configuration/Index.html#configuration" class="">Configuration</a>
</h4>
    <ul class="phpdocumentor-list">
                    <li>
                <a href="guide/Configuration/ConfigurationOverview.html#config-overview" class="">Configuration overview</a>
                
            </li>
                    <li>
                <a href="guide/Configuration/Glossary.html#configuration-classification" class="">Glossary</a>
                
            </li>
                    <li>
                <a href="guide/Configuration/ConfigurationFiles.html#configuration-files" class="">Configuration files</a>
                
            </li>
                    <li>
                <a href="guide/Configuration/ConfigurationModule/Index.html#configuration-module" class="">Configuration module</a>
                
            </li>
                    <li>
                <a href="guide/Configuration/FeatureToggles.html#feature-toggles" class="">Feature toggles</a>
                
            </li>
                    <li>
                <a href="guide/Configuration/GlobalVariables.html#globals-variables" class="">$GLOBALS</a>
                
            </li>
                    <li>
                <a href="guide/Configuration/Typo3ConfVars/Index.html#typo3-conf-vars" class="">TYPO3_CONF_VARS</a>
                
            </li>
                    <li>
                <a href="guide/Configuration/Typo3Information.html#typo3Information" class="">Global meta information about TYPO3</a>
                
            </li>
                    <li>
                <a href="guide/Configuration/Tsconfig.html#tsconfig" class="">TSconfig</a>
                
            </li>
                    <li>
                <a href="guide/Configuration/TypoScriptSyntax/Index.html#typoscript-syntax-about" class="">TypoScript syntax</a>
                
            </li>
                    <li>
                <a href="guide/Configuration/UserSettingsConfiguration/Index.html#user-settings" class="">User settings configuration</a>
                
            </li>
                    <li>
                <a href="guide/Configuration/Yaml/Index.html#yaml" class="">YAML</a>
                
            </li>
            </ul>

                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="guide/ExtensionArchitecture/Index.html#extension-development" class="">Extension development</a>
</h4>
    <ul class="phpdocumentor-list">
                    <li>
                <a href="guide/ExtensionArchitecture/Concepts/Index.html#extension-concepts" class="">Concepts</a>
                
            </li>
                    <li>
                <a href="guide/ExtensionArchitecture/FileStructure/Index.html#extension-reserved-folders-legacy" class="">File structure</a>
                
            </li>
                    <li>
                <a href="guide/ExtensionArchitecture/HowTo/Index.html#extension-howto" class="">Howto</a>
                
            </li>
                    <li>
                <a href="guide/ExtensionArchitecture/Extbase/Index.html#extbase" class="">Extbase</a>
                
            </li>
                    <li>
                <a href="guide/ExtensionArchitecture/BestPractises/Index.html#extension-Best-practises" class="">Best practises and conventions</a>
                
            </li>
                    <li>
                <a href="guide/ExtensionArchitecture/Tutorials/Index.html#extension-tutorials" class="">Tutorials</a>
                
            </li>
            </ul>

                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="guide/Security/Index.html#security" class="">Security guidelines</a>
</h4>
    <ul class="phpdocumentor-list">
                    <li>
                <a href="guide/Security/Introduction/Index.html#security-introduction" class="">Introduction</a>
                
            </li>
                    <li>
                <a href="guide/Security/SecurityTeam/Index.html#security-team" class="">The TYPO3 Security Team</a>
                
            </li>
                    <li>
                <a href="guide/Security/GeneralInformation/Index.html#security-general-information" class="">General Information</a>
                
            </li>
                    <li>
                <a href="guide/Security/TypesOfThreats/Index.html#security-threats" class="">Types of Security Threats</a>
                
            </li>
                    <li>
                <a href="guide/Security/GeneralGuidelines/Index.html#security-general-guidelines" class="">General guidelines</a>
                
            </li>
                    <li>
                <a href="guide/Security/GuidelinesAdministrators/Index.html#security-administrators" class="">Guidelines for System Administrators</a>
                
            </li>
                    <li>
                <a href="guide/Security/GuidelinesExtensionDevelopment/Index.html#security-extension-development" class="">Guidelines for extension development</a>
                
            </li>
                    <li>
                <a href="guide/Security/GuidelinesIntegrators/Index.html#security-integrators" class="">Guidelines for TYPO3 integrators</a>
                
            </li>
                    <li>
                <a href="guide/Security/GuidelinesEditors/Index.html#security-editors" class="">Guidelines for editors</a>
                
            </li>
                    <li>
                <a href="guide/Security/Backups/Index.html#security-backups" class="">Backup strategy</a>
                
            </li>
                    <li>
                <a href="guide/Security/HackedSite/Index.html#security-detect-analyze-repair" class="">Detect, analyze and repair a hacked site</a>
                
            </li>
            </ul>

                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="guide/Testing/Index.html#testing" class="">Testing</a>
</h4>
    <ul class="phpdocumentor-list">
                    <li>
                <a href="guide/Testing/History.html#testing-history" class="">History</a>
                
            </li>
                    <li>
                <a href="guide/Testing/CoreTesting.html#testing-core" class="">Core testing</a>
                
            </li>
                    <li>
                <a href="guide/Testing/ExtensionTesting.html#testing-extensions" class="">Extension testing</a>
                
            </li>
                    <li>
                <a href="guide/Testing/ProjectTesting.html#testing-projects" class="">Project testing</a>
                
            </li>
                    <li>
                <a href="guide/Testing/WritingUnit.html#testing-writing-unit" class="">Writing unit tests</a>
                
            </li>
                    <li>
                <a href="guide/Testing/WritingFunctional.html#testing-writing-functional" class="">Writing functional tests</a>
                
            </li>
                    <li>
                <a href="guide/Testing/WritingAcceptance.html#testing-writing-acceptance" class="">Writing acceptance tests</a>
                
            </li>
                    <li>
                <a href="guide/Testing/Faq.html#testing-faq" class="">FAQ</a>
                
            </li>
            </ul>

                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="guide/About.html#about" class="">About This Manual</a>
</h4>
    <ul class="phpdocumentor-list">
                    <li>
                <a href="guide/About.html#intended-audience" class="">Intended Audience</a>
                
            </li>
                    <li>
                <a href="guide/About.html#code-examples-1" class="">Code examples</a>
                
            </li>
                    <li>
                <a href="guide/About.html#feedback-and-contribute" class="">Feedback and Contribute</a>
                
            </li>
                    <li>
                <a href="guide/About.html#credits-1" class="">Credits</a>
                
            </li>
                    <li>
                <a href="guide/About.html#dedication-1" class="">Dedication</a>
                
            </li>
            </ul>

                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="guide/Sitemap.html#sitemap" class="">Sitemap</a>
</h4>

                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="guide/genindex.html#index" class="">Index</a>
</h4>

                        </section>
            
    <section class="phpdocumentor-sidebar__category">
        <h2 class="phpdocumentor-sidebar__category-header">Reports</h2>
                <h3 class="phpdocumentor-sidebar__root-package"><a href="reports/deprecated.html">Deprecated</a></h3>
        <h3 class="phpdocumentor-sidebar__root-package"><a href="reports/errors.html">Errors</a></h3>
        <h3 class="phpdocumentor-sidebar__root-package"><a href="reports/markers.html">Markers</a></h3>
    </section>

    <section class="phpdocumentor-sidebar__category">
        <h2 class="phpdocumentor-sidebar__category-header">Indices</h2>
        <h3 class="phpdocumentor-sidebar__root-package"><a href="indices/files.html">Files</a></h3>
    </section>
</aside>

            <div class="phpdocumentor-column -nine phpdocumentor-content">
                                        <section>
        
<div class="section" id="flexforms">
    <h1>FlexForms</h1>
            <p>FlexForms can be used to store data within an XML structure inside a single DB
column.</p>
            <p>FlexForms can be used to configure content elements (CE) or plugins, but they are optional so you can create plugins or
content elements without using FlexForms.</p>
            <p>Most of the configuration below is the same, whether you are adding configuration
for a plugin or content element. The main difference is how addPiFlexFormValue()
is used.</p>
            <p>You may want to configure
individual plugins or content elements differently, depending on where they are added. The
configuration set via the FlexForm mechanism applies to only the content
record it has been configured for. The FlexForms configuration for a plugin or CE
can be changed by editors in the backend. This gives editors more control
over plugin features and what is to be rendered.</p>
            <p>Using FlexForms you have all the features of TCA, so it is possible
to use input fields, select lists, show options conditionally and more.</p>
            <dl>
                        <dt>The superfluous array key TCEforms was removed and is not evaluated</dt>
        
        <dd>anymore. Its sole purpose was to wrap real TCA definitions. The TCEforms tags <strong>should</strong>
be removed upon dropping TYPO3 v11 support. In TYPO3 v12 there is an automatic migration
that will be removed in a future version.</dd><dd></dd>    </dl>
    </div>
<div class="section" id="example-use-cases">
    <h1>Example use cases</h1>
            <p>The <a href="https://github.com/benjaminkott/bootstrap_package">bootstrap_package</a>
uses FlexForms to configure rendering options,
e.g. a transition interval and transition type (slide, fade)
for the carousel content element.</p>
            <figure>
    <img
    src="./Images/AutomaticScreenshots/FlexForms/FlexFormCarousel.png"
                        />

            
                    <figcaption><p>The carousel content element of <a href="EXT:bootstrap_package">EXT:bootstrap_package</a></p>
</figcaption>
            </figure>

            <p>Another extensions that utilize FlexForms and can be used as example is:</p>
            

<ul>
    <li><a href="https://github.com/georgringer/news">georgringer/news</a></li>
</ul>
    </div>
<div class="section" id="how-it-works">
    <h1>How it works</h1>
            
    
<ol>
    <li>In the extension, a configuration schema is defined and attached to
one or more content elements or plugins.</li>
    <li>When the CE or plugin is added to a page, it can be configured as defined
by the configuration
schema.</li>
    <li>The configuration for this content element is automatically saved to tt_content.pi_flexform.</li>
    <li>The extension can read current configuration and act according to
the configuration.</li>
</ol>
            <div class="phpdocumentor-admonition -tip">
                    <svg class="phpdocumentor-admonition__icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.364 5.636l-3.536 3.536m0 5.656l3.536 3.536M9.172 9.172L5.636 5.636m3.536 9.192l-3.536 3.536M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-5 0a4 4 0 11-8 0 4 4 0 018 0z"></path></svg>
            <article>
        <p>The data structure of a FlexForm may change over time. Also, when switching
from one plugin with a FlexForm to another plugin with a FlexForm in an
element, the old values are not removed in the FlexForm field. This
may cause problems and errors. You can avoid this by calling the
CLI command cleanup:flexforms which is
provided by the lowlevel system extension. It
updates all database records which have a FlexForm field and the XML data
does not match the chosen data structure.</p>

    </article>
</div>
    </div>
<div class="section" id="steps-to-perform-extension-developer">
    <h1>Steps to perform (extension developer)</h1>
            
    
<ol>
    <li><p>Create configuration schema in T3DataStructure format (XML)</p><p><strong>Example:</strong></p><pre><code class="language-xml">&lt;T3DataStructure&gt;
    &lt;meta&gt;
        &lt;langDisable&gt;1&lt;/langDisable&gt;
    &lt;/meta&gt;
    &lt;sheets&gt;
        &lt;sDEF&gt;
            &lt;ROOT&gt;
                &lt;sheetTitle&gt;
                    LLL:EXT:examples/Resources/Private/Language/locallang_db.xlf:examples.pi_flexform.sheetGeneral
                &lt;/sheetTitle&gt;
                &lt;type&gt;array&lt;/type&gt;
                &lt;el&gt;
                    &lt;settings.singlePid&gt;
                        &lt;label&gt;
                            LLL:EXT:examples/Resources/Private/Language/PluginHaiku/locallang_db.xlf:singlePageUid
                        &lt;/label&gt;
                        &lt;config&gt;
                            &lt;type&gt;group&lt;/type&gt;
                            &lt;allowed&gt;pages&lt;/allowed&gt;
                            &lt;maxitems&gt;1&lt;/maxitems&gt;
                            &lt;minitems&gt;0&lt;/minitems&gt;
                            &lt;size&gt;1&lt;/size&gt;
                            &lt;suggestOptions&gt;
                                &lt;default&gt;
                                    &lt;additionalSearchFields&gt;nav_title, alias, url&lt;/additionalSearchFields&gt;
                                    &lt;addWhere&gt;AND pages.doktype = 1&lt;/addWhere&gt;
                                &lt;/default&gt;
                            &lt;/suggestOptions&gt;
                        &lt;/config&gt;
                    &lt;/settings.singlePid&gt;
                &lt;/el&gt;
            &lt;/ROOT&gt;
        &lt;/sDEF&gt;
    &lt;/sheets&gt;
&lt;/T3DataStructure&gt;</code></pre>
</li>
    <li><p>The configuration schema is attached to one or more plugins in the folder
Configuration/TCA/Overrides of an extension.</p><p>Example for the FlexForm registration of a basic plugin:</p><pre><code class="language-php">&lt;?php

/*
 * This file is part of the TYPO3 CMS project. [...]
 */ 

defined(&#039;TYPO3&#039;) or die();

\TYPO3\CMS\Core\Utility\ExtensionManagementUtility::addPlugin(
    [
        &#039;LLL:EXT:examples/Resources/Private/Language/PluginHaiku/locallang_db.xlf:list.title&#039;,
        &#039;examples_haiku_list&#039;,
        &#039;tx_examples-haiku&#039;,
    ],
    &#039;list_type&#039;,
    &#039;examples&#039;
);

$GLOBALS[&#039;TCA&#039;][&#039;tt_content&#039;][&#039;types&#039;][&#039;list&#039;][&#039;subtypes_excludelist&#039;][&#039;examples_haiku_list&#039;]=&#039;pages,layout,select_key,recursive&#039;;

$GLOBALS[&#039;TCA&#039;][&#039;tt_content&#039;][&#039;types&#039;][&#039;list&#039;][&#039;subtypes_addlist&#039;][&#039;examples_haiku_list&#039;]=&#039;pi_flexform&#039;;

\TYPO3\CMS\Core\Utility\ExtensionManagementUtility::addPiFlexFormValue(
    &#039;examples_haiku_list&#039;,
    &#039;FILE:EXT:examples/Configuration/Flexforms/PluginHaikuList.xml&#039;
);</code></pre>
<p>The method ExtensionUtility::registerPlugin() returns the plugin signature.</p><p>When registering Extbase plugins you can use the return value of
ExtensionUtility::registerPlugin() to figure out the plugin
signature to use:</p><pre><code class="language-php">$pluginSignature = ExtensionUtility::registerPlugin(
    &#039;blog_example&#039;,
    &#039;Pi1&#039;,
    &#039;A Blog Example&#039;,
);
$GLOBALS[&#039;TCA&#039;][&#039;tt_content&#039;][&#039;types&#039;][&#039;list&#039;][&#039;subtypes_addlist&#039;][$pluginSignature]
    = &#039;pi_flexform&#039;;
ExtensionManagementUtility::addPiFlexFormValue(
    $pluginSignature,
    &#039;FILE:EXT:blog_example/Configuration/FlexForms/PluginSettings.xml&#039;
);</code></pre><p>If you are using a content element instead of a plugin, the example
looks like this:</p><pre><code class="language-php">\TYPO3\CMS\Core\Utility\ExtensionManagementUtility::addPiFlexFormValue(
    // &#039;list_type&#039; does not apply here
    &#039;*&#039;,
    // FlexForm configuration schema file
    &#039;FILE:EXT:example/Configuration/FlexForms/Registration.xml&#039;,
    // ctype
    &#039;accordion&#039;
);</code></pre><p>Finally, according to &quot;Configuration of the displayed order of fields in FormEngine
and their tab alignment.&quot; the field containing the FlexForm still needs to be
added to the showitem directive.
The following example shows line from the accordion element of the Bootstrap Package.</p><pre><code class="language-php">// Configure element type
$GLOBALS[&#039;TCA&#039;][&#039;tt_content&#039;][&#039;types&#039;][&#039;accordion&#039;] = array_replace_recursive(
    $GLOBALS[&#039;TCA&#039;][&#039;tt_content&#039;][&#039;types&#039;][&#039;accordion&#039;],
    [
        &#039;showitem&#039; =&gt; &#039;
            --div--;General,
            --palette--;General;general,
            --palette--;Headers;headers,
            tx_bootstrappackage_accordion_item,
            --div--;Options,
            pi_flexform&#039;
    ]
);</code></pre></li>
    <li><p>Access the settings in your extension:</p><p>The settings can be read using one of the methods described below, e.g.
from an Extbase controller action,
from a PHP function (without using the
Extbase framework), from TypoScript or
from within a Fluid template.</p></li>
</ol>
    </div>
<div class="section" id="more-examples">
    <h1>More examples</h1>
            <p>The definition of the data types and parameters used complies to the
column types defined by TCA.</p>
            <p>The settings must be added within the  element in the FlexForm
configuration schema file.</p>
            <div class="section" id="select-field">
    <h2>Select field</h2>
            <pre><code class="language-xml">&lt;settings.orderBy&gt;
    &lt;label&gt;
        LLL:EXT:example/Resources/Private/Language/Backend.xlf:settings.registration.orderBy
    &lt;/label&gt;
    &lt;config&gt;
        &lt;type&gt;select&lt;/type&gt;
        &lt;renderType&gt;selectSingle&lt;/renderType&gt;
        &lt;items&gt;
            &lt;numIndex index=&quot;0&quot;&gt;
                &lt;numIndex index=&quot;0&quot;&gt;
                    LLL:EXT:example/Resources/Private/Language/Backend.xlf:settings.registration.orderBy.crdate
                &lt;/numIndex&gt;
                &lt;numIndex index=&quot;1&quot;&gt;crdate&lt;/numIndex&gt;
            &lt;/numIndex&gt;
            &lt;numIndex index=&quot;1&quot;&gt;
                &lt;numIndex index=&quot;0&quot;&gt;
                    LLL:EXT:example/Resources/Private/Language/Backend.xlf:settings.registration.orderBy.title
                &lt;/numIndex&gt;
                &lt;numIndex index=&quot;1&quot;&gt;title&lt;/numIndex&gt;
            &lt;/numIndex&gt;
        &lt;/items&gt;
    &lt;/config&gt;
&lt;/settings.orderBy&gt;</code></pre>
            <div class="phpdocumentor-admonition -seealso">
                        <svg class="phpdocumentor-admonition__icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path></svg>
        <article>
        

<ul>
    <li>t3tca:columns-select in TCA reference.</li>
</ul>

    </article>
</div>
            <a id="flexforms-itemsProcFunc"></a>
    </div>
            <div class="section" id="populate-a-select-field-with-a-php-function-itemsprocfunc">
    <h2>Populate a select field with a PHP Function (itemsProcFunc)</h2>
            <pre><code class="language-xml">&lt;settings.orderBy&gt;
    &lt;label&gt;
        LLL:EXT:example/Resources/Private/Language/Backend.xlf:settings.registration.orderBy
    &lt;/label&gt;
    &lt;config&gt;
        &lt;type&gt;select&lt;/type&gt;
        &lt;itemsProcFunc&gt;MyVendor\Example\Backend\ItemsProcFunc-&gt;user_orderBy
        &lt;/itemsProcFunc&gt;
        &lt;renderType&gt;selectSingle&lt;/renderType&gt;
        &lt;items&gt;
            &lt;!-- empty by default --&gt;
        &lt;/items&gt;
    &lt;/config&gt;
&lt;/settings.orderBy&gt;</code></pre>
            <p>The function user_orderBy populates the select field in
Backend\ItemsProcFunc.php:</p>
            <pre><code class="language-php">class ItemsProcFunc
{
     /**
     * Modifies the select box of orderBy-options.
     *
     * @param array &amp;$config configuration array
     */
    public function user_orderBy(array &amp;$config)
    {
        // simple and stupid example
        // change this to dynamically populate the list!
        $config[&#039;items&#039;] = [
            // label, value
            [&#039;Timestamp&#039;, &#039;timestamp&#039;],
            [&#039;Title&#039;, &#039;title&#039;]
        ];
    }

    // ...
}</code></pre>
            <p>How this looks when configuring the plugin:</p>
            <figure>
    <img
    src="./Images/ManualScreenshots/FlexForms/FlexFormsItemsProcFunc.png"
                        />

            
            </figure>
            <div class="phpdocumentor-admonition -seealso">
                        <svg class="phpdocumentor-admonition__icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path></svg>
        <article>
        

<ul>
    <li>t3tca:columns-select-properties-itemsprocfunc in TCA reference.</li>
</ul>

    </article>
</div>
            <a id="flexformDisplayCond"></a>
    </div>
            <div class="section" id="display-fields-conditionally-displaycond">
    <h2>Display fields conditionally (displayCond)</h2>
            <p>Some settings may only make sense, depending on other settings.
For example in one setting you define a sorting order (by date, title etc.)
and all sort orders except &quot;title&quot; have additional settings. These
should only be visible, if sort order &quot;title&quot; was not selected.</p>
            <p>You can define conditions using displayCond. This dynamically defines
whether a setting should be displayed when the plugin is configured.
The conditions may for example depend on one or more other settings in the FlexForm,
on database fields of current record or be defined by a user function.</p>
            <pre><code class="language-xml">&lt;config&gt;
    &lt;type&gt;select&lt;/type&gt;
&lt;/config&gt;
&lt;!-- Hide field if value of neighbour field &quot;settings.orderBy&quot; on same sheet is not &quot;title&quot; --&gt;
&lt;displayCond&gt;FIELD:settings.orderBy:!=:title&lt;/displayCond&gt;</code></pre>
            <p>Again, the syntax and available fields and comparison operators is documented
in the TCA reference:</p>
            <div class="phpdocumentor-admonition -seealso">
                        <svg class="phpdocumentor-admonition__icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path></svg>
        <article>
        

<ul>
    <li>t3tca:columns-properties-displaycond in TCA Reference</li>
</ul>

    </article>
</div>
            <a id="flexformReload"></a>
    </div>
            <div class="section" id="reload-on-change">
    <h2>Reload on change</h2>
            <p>Especially in combination with conditionally displaying settings with
displayCond, you may want to trigger
a reloading of the form when specific settings are changed. You
can do that with:</p>
            <pre><code class="language-xml">&lt;onChange&gt;reload&lt;/onChange&gt;
&lt;config&gt;
    &lt;!-- ... --&gt;
&lt;/config&gt;</code></pre>
            <p>The onChange element is optional and must be placed on the same level as the  element.</p>
            <a id="read-flexforms"></a>
            <a id="read-flexforms-extbase"></a>
    </div>
            <div class="section" id="how-to-read-flexforms-from-an-extbase-controller-action">
    <h2>How to read FlexForms from an Extbase controller action</h2>
            <p>The settings can be read using $this-settings in an
Extbase controller.</p>
            <pre><code class="language-php">$includeCategories = (bool) ($this-&gt;settings[&#039;includeCategories&#039;] ?? false);</code></pre>
            <blockquote><p>If you wish to access a setting from your controller via
$this-settings, the name of the setting must be prefixed with settings.,
so literally settings directly followed by a dot (.).</p></blockquote>
            <a id="read-flexforms-php"></a>
    </div>
            <div class="section" id="read-flexforms-values-in-php">
    <h2>Read FlexForms values in PHP</h2>
            <p>You can use the FlexFormService to read the content of a FlexForm field:</p>
            <pre><code class="language-php">use TYPO3\CMS\Core\Service\FlexFormService;
use TYPO3\CMS\Core\Utility\GeneralUtility;

final class NonExtbaseController
{

    // Inject FlexFormService
    public function __construct(
        private readonly FlexFormService $flexFormService,
    ) {
    }

    // ...

    private function loadFlexForm($flexFormString): array
    {
        return $this-&gt;flexFormService
            -&gt;convertFlexFormContentToArray($flexFormString);
    }
}</code></pre>
            <p>Using FlexFormService-convertFlexFormContentToArray the resulting
array can be used conveniently in most use cases:</p>
            <pre><code class="language-php">var_export(
    $this-&gt;flexFormService-&gt;convertFlexFormContentToArray($flexFormString)
);</code></pre>
            <dl>
                        <dt>/* Output:</dt>
        
        <dd><dl>
                        <dt>[</dt>
        
        <dd><dl>
                        <dt>&#039;settings&#039; =&gt; [</dt>
        
        <dd>&#039;singlePid&#039; =&gt; 25,
&#039;listPid&#039; =&gt; 380,</dd>    </dl><p>],</p></dd>    </dl><p>]
*/</p></dd>    </dl>
            <p>The result of GeneralUtility::xml2array() preserves the internal
structure of the XML FlexForm, and is usually used to modify a FlexForm
string. See section modify-flexforms-php for an example.</p>
            <pre><code class="language-php">var_export(GeneralUtility::xml2array($flexFormString)));

/* Output:
[
    &#039;data&#039; =&gt;
        [
            &#039;sDEF&#039; =&gt;
                [
                    &#039;lDEF&#039; =&gt;
                        [
                            &#039;settings.singlePid&#039; =&gt;[&#039;vDEF&#039; =&gt; &#039;4&#039;,],
                            &#039;settings.listPid&#039; =&gt;[&#039;vDEF&#039; =&gt; &#039;&#039;,],
                        ],
                ],
        ],
];
*/</code></pre>
            <a id="modify-flexforms-php"></a>
    </div>
            <div class="section" id="how-to-modify-flexforms-from-php">
    <h2>How to modify FlexForms from PHP</h2>
            <p>Some situation make it necessary to modify FlexForms via PHP.</p>
            <p>In order to convert a FlexForm to a PHP array, preserving the structure,
the xml2array method in GeneralUtility  can be used to read
the FlexForm data, then the FlexFormTools can be used to write back the
changes.</p>
            <pre><code class="language-php">use \TYPO3\CMS\Core\Utility\GeneralUtility;
use \TYPO3\CMS\Core\Configuration\FlexForm\FlexFormTools;

$flexFormArray = GeneralUtility::xml2array($flexFormString);
$changedFlexFormArray = $this-&gt;doSomething($flexFormArray);

$flexFormTools = new FlexFormTools();
$flexFormString = $flexFormTools-&gt;flexArray2Xml($changedFlexFormArray, addPrologue: true);</code></pre>
            <a id="read-flexforms-ts"></a>
    </div>
            <div class="section" id="how-to-access-flexforms-from-typoscript">
    <h2>How to access FlexForms From TypoScript</h2>
            <p>It is possible to read FlexForm properties from TypoScript:</p>
            <pre><code class="language-typoscript">lib.flexformContent = CONTENT
lib.flexformContent {
    table = tt_content
    select {
        pidInList = this
    }

    renderObj = COA
    renderObj {
        10 = TEXT
        10 {
            data = flexform: pi_flexform:settings.categories
        }
    }
}</code></pre>
            <p>The key flexform is followed by the field which holds the FlexForm data
(pi_flexform) and the name of the property whose content should be retrieved
(settings.categories).</p>
            <div class="phpdocumentor-admonition -seealso">
                        <svg class="phpdocumentor-admonition__icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path></svg>
        <article>
        

<ul>
    <li>TypoScript: flexform</li>
</ul>

    </article>
</div>
            <a id="read-flexforms-fluid"></a>
    </div>
            <div class="section" id="how-to-access-flexforms-from-fluid">
    <h2>How to access FlexForms from Fluid</h2>
            <p>If you are using an Extbase controller, FlexForm settings can be read from within a Fluid template using
{settings}. See the note on naming restrictions in How to Read FlexForms From an Extbase Controller Action.</p>
            <p>If you defined your FLUIDTEMPLATE in TypoScript, you can assign single variables like that:</p>
            <pre><code class="language-typoscript">my_content = FLUIDTEMPLATE
my_content {
  variables {
    categories = TEXT
    categories.data = flexform: pi_flexform:categories
  }
}</code></pre>
            <p>In order to have all FlexForm fields available, you can use the FlexFormProcessor. See also
FlexFormProcessor in the TypoScript Reference.
This example would make your FlexForm data available as Fluid variable {flexform}:</p>
            <pre><code class="language-typoscript">my_content = FLUIDTEMPLATE
my_content {
  dataProcessing {
    10 = TYPO3\CMS\Frontend\DataProcessing\FlexFormProcessor
    10.fieldName = my_flexform_field
    10.as = myOutputVariable
  }
}</code></pre>
            <div class="phpdocumentor-admonition -seealso">
                        <svg class="phpdocumentor-admonition__icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path></svg>
        <article>
        <p>FlexFormProcessor.</p>

    </article>
</div>
    </div>
    </div>
<div class="section" id="steps-to-perform-editor">
    <h1>Steps to Perform (Editor)</h1>
            <p>After inserting a plugin, the editor can configure this plugin by switching
to the tab &quot;Plugin&quot; or whatever string you defined to replace this.</p>
            <figure>
    <img
    src="./Images/ManualScreenshots/FlexForms/FlexformBackend.png"
                        />

            
            </figure>
    </div>
<div class="section" id="credits">
    <h1>Credits</h1>
            <p>Some of the examples were taken from the extensions
news (by Georg Ringer)
and bootstrap_package
(by Benjamin Kott).</p>
            <p>Further enhancements by the TYPO3 community are welcome!</p>
    </div>

    </section>
                            </div>
            <section data-search-results class="phpdocumentor-search-results phpdocumentor-search-results--hidden">
    <section class="phpdocumentor-search-results__dialog">
        <header class="phpdocumentor-search-results__header">
            <h2 class="phpdocumentor-search-results__title">Search results</h2>
            <button class="phpdocumentor-search-results__close"><i class="fas fa-times"></i></button>
        </header>
        <section class="phpdocumentor-search-results__body">
            <ul class="phpdocumentor-search-results__entries"></ul>
        </section>
    </section>
</section>
        </div>
        <a href="guide/ApiOverview/FlexForms/Index.html#top" class="phpdocumentor-back-to-top"><i class="fas fa-chevron-circle-up"></i></a>

    </main>

    <script>
        cssVars({});
    </script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/prism.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/plugins/line-numbers/prism-line-numbers.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/plugins/line-highlight/prism-line-highlight.min.js"></script>
</body>
</html>