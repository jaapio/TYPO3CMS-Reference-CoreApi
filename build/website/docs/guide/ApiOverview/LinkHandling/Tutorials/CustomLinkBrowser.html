<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
                    <title>phpDocumentor</title>
    

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <base href="../../../../">
    <link rel="icon" href="images/favicon.ico"/>
    <link rel="stylesheet" href="css/normalize.css">
    <link rel="stylesheet" href="css/base.css">
            <link rel="preconnect" href="https://fonts.gstatic.com">
        <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@100;200;300;400;600;700&display=swap" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:wght@400;600;700&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="css/template.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.0/css/all.min.css" integrity="sha256-ybRkN9dBjhcS2qrW1z+hfCxq+1aBdwyQM5wlQoQVt/0=" crossorigin="anonymous" />
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/themes/prism-okaidia.css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/plugins/line-numbers/prism-line-numbers.css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/plugins/line-highlight/prism-line-highlight.css">
                <script src="https://cdn.jsdelivr.net/npm/fuse.js@3.4.6"></script>
        <script src="https://cdn.jsdelivr.net/npm/css-vars-ponyfill@2"></script>
        <script src="js/template.js"></script>
        <script src="js/search.js"></script>
        <script defer src="js/searchIndex.js"></script>
    </head>
<body id="top">
    <header class="phpdocumentor-header phpdocumentor-section">
    <h1 class="phpdocumentor-title"><a href="" class="phpdocumentor-title__link">phpDocumentor</a></h1>
    <input class="phpdocumentor-header__menu-button" type="checkbox" id="menu-button" name="menu-button" />
    <label class="phpdocumentor-header__menu-icon" for="menu-button">
        <i class="fas fa-bars"></i>
    </label>
    <section data-search-form class="phpdocumentor-search">
    <label>
        <span class="visually-hidden">Search for</span>
        <svg class="phpdocumentor-search__icon" width="21" height="20" viewBox="0 0 21 20" fill="none" xmlns="http://www.w3.org/2000/svg">
            <circle cx="7.5" cy="7.5" r="6.5" stroke="currentColor" stroke-width="2"/>
            <line x1="12.4892" y1="12.2727" x2="19.1559" y2="18.9393" stroke="currentColor" stroke-width="3"/>
        </svg>
        <input type="search" class="phpdocumentor-field phpdocumentor-search__field" placeholder="Loading .." disabled />
    </label>
</section>

    <nav class="phpdocumentor-topnav">
    <ul class="phpdocumentor-topnav__menu">
        </ul>
</nav>
</header>

    <main class="phpdocumentor">
        <div class="phpdocumentor-section">
            <input class="phpdocumentor-sidebar__menu-button" type="checkbox" id="sidebar-button" name="sidebar-button" />
<label class="phpdocumentor-sidebar__menu-icon" for="sidebar-button">
    Menu
</label>
<aside class="phpdocumentor-column -three phpdocumentor-sidebar">
                    <section class="phpdocumentor-sidebar__category">
            <h2 class="phpdocumentor-sidebar__category-header">typo3-explained</h2>
                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="guide/Introduction/Index.html#introduction" class="">Introduction</a>
</h4>
    <ul class="phpdocumentor-list">
                    <li>
                <a href="guide/Introduction/Index.html#system-overview-1" class="">System Overview</a>
                
            </li>
                    <li>
                <a href="guide/Introduction/Index.html#a-basic-installation" class="">A basic installation</a>
                
            </li>
            </ul>

                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="guide/ApiOverview/Index.html#api-a-z" class="">API A-Z</a>
</h4>

                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="guide/CodingGuidelines/Index.html#cgl" class="">Coding Guidelines</a>
</h4>
    <ul class="phpdocumentor-list">
                    <li>
                <a href="guide/CodingGuidelines/Introduction.html#cgl-introduction" class="">Introduction</a>
                
            </li>
                    <li>
                <a href="guide/CodingGuidelines/CglPhp/Index.html#cgl-php" class="">PHP Coding Guidelines</a>
                
            </li>
                    <li>
                <a href="guide/CodingGuidelines/CglJavaScript/Index.html#cgl-javascript" class="">JavaScript Coding Guidelines</a>
                
            </li>
                    <li>
                <a href="guide/CodingGuidelines/CglTypeScript/Index.html#cgl-typescript" class="">TypeScript Coding Guidelines</a>
                
            </li>
                    <li>
                <a href="guide/CodingGuidelines/CglTypoScript/Index.html#cgl-typoscript" class="">TypoScript Coding Guidelines</a>
                
            </li>
                    <li>
                <a href="guide/CodingGuidelines/CglTsConfig.html#cgl-tsconfig" class="">TSconfig Coding Guidelines</a>
                
            </li>
                    <li>
                <a href="guide/CodingGuidelines/CglXliff/Index.html#cgl-xliff" class="">Xliff Coding Guidelines</a>
                
            </li>
                    <li>
                <a href="guide/CodingGuidelines/CglYaml.html#cgl-yaml" class="">Yaml Coding Guidelines</a>
                
            </li>
                    <li>
                <a href="guide/CodingGuidelines/CglRest/Index.html#cgl-rest" class="">reStructuredText (reST)</a>
                
            </li>
            </ul>

                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="guide/Configuration/Index.html#configuration" class="">Configuration</a>
</h4>
    <ul class="phpdocumentor-list">
                    <li>
                <a href="guide/Configuration/ConfigurationOverview.html#config-overview" class="">Configuration overview</a>
                
            </li>
                    <li>
                <a href="guide/Configuration/Glossary.html#configuration-classification" class="">Glossary</a>
                
            </li>
                    <li>
                <a href="guide/Configuration/ConfigurationFiles.html#configuration-files" class="">Configuration files</a>
                
            </li>
                    <li>
                <a href="guide/Configuration/ConfigurationModule/Index.html#configuration-module" class="">Configuration module</a>
                
            </li>
                    <li>
                <a href="guide/Configuration/FeatureToggles.html#feature-toggles" class="">Feature toggles</a>
                
            </li>
                    <li>
                <a href="guide/Configuration/GlobalVariables.html#globals-variables" class="">$GLOBALS</a>
                
            </li>
                    <li>
                <a href="guide/Configuration/Typo3ConfVars/Index.html#typo3-conf-vars" class="">TYPO3_CONF_VARS</a>
                
            </li>
                    <li>
                <a href="guide/Configuration/Typo3Information.html#typo3Information" class="">Global meta information about TYPO3</a>
                
            </li>
                    <li>
                <a href="guide/Configuration/Tsconfig.html#tsconfig" class="">TSconfig</a>
                
            </li>
                    <li>
                <a href="guide/Configuration/TypoScriptSyntax/Index.html#typoscript-syntax-about" class="">TypoScript syntax</a>
                
            </li>
                    <li>
                <a href="guide/Configuration/UserSettingsConfiguration/Index.html#user-settings" class="">User settings configuration</a>
                
            </li>
                    <li>
                <a href="guide/Configuration/Yaml/Index.html#yaml" class="">YAML</a>
                
            </li>
            </ul>

                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="guide/ExtensionArchitecture/Index.html#extension-development" class="">Extension development</a>
</h4>
    <ul class="phpdocumentor-list">
                    <li>
                <a href="guide/ExtensionArchitecture/Concepts/Index.html#extension-concepts" class="">Concepts</a>
                
            </li>
                    <li>
                <a href="guide/ExtensionArchitecture/FileStructure/Index.html#extension-reserved-folders-legacy" class="">File structure</a>
                
            </li>
                    <li>
                <a href="guide/ExtensionArchitecture/HowTo/Index.html#extension-howto" class="">Howto</a>
                
            </li>
                    <li>
                <a href="guide/ExtensionArchitecture/Extbase/Index.html#extbase" class="">Extbase</a>
                
            </li>
                    <li>
                <a href="guide/ExtensionArchitecture/BestPractises/Index.html#extension-Best-practises" class="">Best practises and conventions</a>
                
            </li>
                    <li>
                <a href="guide/ExtensionArchitecture/Tutorials/Index.html#extension-tutorials" class="">Tutorials</a>
                
            </li>
            </ul>

                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="guide/Security/Index.html#security" class="">Security guidelines</a>
</h4>
    <ul class="phpdocumentor-list">
                    <li>
                <a href="guide/Security/Introduction/Index.html#security-introduction" class="">Introduction</a>
                
            </li>
                    <li>
                <a href="guide/Security/SecurityTeam/Index.html#security-team" class="">The TYPO3 Security Team</a>
                
            </li>
                    <li>
                <a href="guide/Security/GeneralInformation/Index.html#security-general-information" class="">General Information</a>
                
            </li>
                    <li>
                <a href="guide/Security/TypesOfThreats/Index.html#security-threats" class="">Types of Security Threats</a>
                
            </li>
                    <li>
                <a href="guide/Security/GeneralGuidelines/Index.html#security-general-guidelines" class="">General guidelines</a>
                
            </li>
                    <li>
                <a href="guide/Security/GuidelinesAdministrators/Index.html#security-administrators" class="">Guidelines for System Administrators</a>
                
            </li>
                    <li>
                <a href="guide/Security/GuidelinesExtensionDevelopment/Index.html#security-extension-development" class="">Guidelines for extension development</a>
                
            </li>
                    <li>
                <a href="guide/Security/GuidelinesIntegrators/Index.html#security-integrators" class="">Guidelines for TYPO3 integrators</a>
                
            </li>
                    <li>
                <a href="guide/Security/GuidelinesEditors/Index.html#security-editors" class="">Guidelines for editors</a>
                
            </li>
                    <li>
                <a href="guide/Security/Backups/Index.html#security-backups" class="">Backup strategy</a>
                
            </li>
                    <li>
                <a href="guide/Security/HackedSite/Index.html#security-detect-analyze-repair" class="">Detect, analyze and repair a hacked site</a>
                
            </li>
            </ul>

                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="guide/Testing/Index.html#testing" class="">Testing</a>
</h4>
    <ul class="phpdocumentor-list">
                    <li>
                <a href="guide/Testing/History.html#testing-history" class="">History</a>
                
            </li>
                    <li>
                <a href="guide/Testing/CoreTesting.html#testing-core" class="">Core testing</a>
                
            </li>
                    <li>
                <a href="guide/Testing/ExtensionTesting.html#testing-extensions" class="">Extension testing</a>
                
            </li>
                    <li>
                <a href="guide/Testing/ProjectTesting.html#testing-projects" class="">Project testing</a>
                
            </li>
                    <li>
                <a href="guide/Testing/WritingUnit.html#testing-writing-unit" class="">Writing unit tests</a>
                
            </li>
                    <li>
                <a href="guide/Testing/WritingFunctional.html#testing-writing-functional" class="">Writing functional tests</a>
                
            </li>
                    <li>
                <a href="guide/Testing/WritingAcceptance.html#testing-writing-acceptance" class="">Writing acceptance tests</a>
                
            </li>
                    <li>
                <a href="guide/Testing/Faq.html#testing-faq" class="">FAQ</a>
                
            </li>
            </ul>

                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="guide/About.html#about" class="">About This Manual</a>
</h4>
    <ul class="phpdocumentor-list">
                    <li>
                <a href="guide/About.html#intended-audience" class="">Intended Audience</a>
                
            </li>
                    <li>
                <a href="guide/About.html#code-examples-1" class="">Code examples</a>
                
            </li>
                    <li>
                <a href="guide/About.html#feedback-and-contribute" class="">Feedback and Contribute</a>
                
            </li>
                    <li>
                <a href="guide/About.html#credits-1" class="">Credits</a>
                
            </li>
                    <li>
                <a href="guide/About.html#dedication-1" class="">Dedication</a>
                
            </li>
            </ul>

                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="guide/Sitemap.html#sitemap" class="">Sitemap</a>
</h4>

                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="guide/genindex.html#index" class="">Index</a>
</h4>

                        </section>
            
    <section class="phpdocumentor-sidebar__category">
        <h2 class="phpdocumentor-sidebar__category-header">Reports</h2>
                <h3 class="phpdocumentor-sidebar__root-package"><a href="reports/deprecated.html">Deprecated</a></h3>
        <h3 class="phpdocumentor-sidebar__root-package"><a href="reports/errors.html">Errors</a></h3>
        <h3 class="phpdocumentor-sidebar__root-package"><a href="reports/markers.html">Markers</a></h3>
    </section>

    <section class="phpdocumentor-sidebar__category">
        <h2 class="phpdocumentor-sidebar__category-header">Indices</h2>
        <h3 class="phpdocumentor-sidebar__root-package"><a href="indices/files.html">Files</a></h3>
    </section>
</aside>

            <div class="phpdocumentor-column -nine phpdocumentor-content">
                                        <section>
        
<div class="section" id="tutorial-github-link-handler">
    <h1>Create a custom link browser</h1>
            <p>In this tutorial we create a custom link browser and the associated
backend link handler.</p>
            <p>We create a new tab in the link browser window in the TYPO3 backend:</p>
            <figure>
    <img
    src="./Images/ManualScreenshots/Backend/CustomLinkBrowser.png"
                        />

            
                    <figcaption><p>A custom link browser to link to GitHub issues</p>
</figcaption>
            </figure>

            <div class="phpdocumentor-admonition -tip">
                    <svg class="phpdocumentor-admonition__icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.364 5.636l-3.536 3.536m0 5.656l3.536 3.536M9.172 9.172L5.636 5.636m3.536 9.192l-3.536 3.536M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-5 0a4 4 0 11-8 0 4 4 0 018 0z"></path></svg>
            <article>
        <p>If you want to link to a record in a custom table, configure the
RecordLinkBrowser. You do not
need a custom link browser in that scenario.</p>

    </article>
</div>
            <p>We introduce a custom link format to store
the links in this format: t3://github?issue=123.</p>
            <p>This enables us to edit an existing link in the
link browser or to change parts of the GitHub URI programmatically later.</p>
            <p>And we render the new link in the frontend
automatically.</p>
            <p><strong>Step by step to a custom link browser</strong></p>
            <p>:local:</p>
            <a id="tutorial_backend_link_handler-tsconfig"></a>
    </div>
<div class="section" id="1-register-the-custom-link-browser-tab-in-page-tsconfig">
    <h1>1.  Register the custom link browser tab in page TSconfig</h1>
            <pre><code class="language-typoscript">TCEMAIN.linkHandler {
   github {
      handler = T3docs\Examples\LinkHandler\GitHubLinkHandler
      label = LLL:EXT:examples/Resources/Private/Language/locallang_browse_links.xlf:github
      displayAfter = haiku
      scanBefore = url
      configuration {
         project = TYPO3-Documentation/TYPO3CMS-Reference-CoreApi
         action = issues
      }
   }
}</code></pre>

            <p>The following options are of note here:</p>
            <dl>
                        <dt>handler</dt>
        
        <dd>The backend link handler that we
create in step 2.</dd>                        <dt>configuration</dt>
        
        <dd>Some configuration, available to the backend link handler. This information
is <strong>not available in the frontend</strong>. Therefore in the frontend
rendering of the link the information must be
stored in another way. In this example we hardcoded it. But you could also
make it available by TypoScript Setup or as part of the link that is saved.</dd>    </dl>
            <p>For a complete list of available option see link-handler-configuration.</p>
            <a id="tutorial_backend_link_handler"></a>
    </div>
<div class="section" id="2-create-a-link-browser-tab">
    <h1>2. Create a link browser tab</h1>
            <p>To create a link browser tab we implement the interface
\TYPO3\CMS\Backend\LinkHandler\LinkHandlerInterface.</p>
            <p>All backend link handlers provided by the Core extend the abstract class
TYPO3\CMS\Backend\LinkHandler\AbstractLinkHandler. However, this class is
marked as @internal and therefore can be changed by the Core Team at any time.</p>
            <p>You have the choice of implementing the LinkHandlerInterface yourself by
having a look at the AbstractLinkHandler for best practices or to extend
the AbstractLinkHandler. In the latter case your code might break on
updates though.</p>
            <p>In this tutorial, we implement the LinkHandlerInterface directly, as it is
best practice not to rely on internal classes.</p>
            <p>You can find the complete class in the extension <a href="EXT:examples">EXT:examples</a> on GitHub:
<a href="https://github.com/TYPO3-Documentation/t3docs-examples/blob/main/Classes/LinkHandler/GitHubLinkHandler.php">GitHubLinkHandler</a>.</p>
            <p>We will explain some of the important methods below:</p>
            <div class="section" id="initialization-and-dependencies">
    <h2>Initialization and dependencies</h2>
            <pre><code class="language-php">use TYPO3\CMS\Backend\Controller\AbstractLinkBrowserController;
use TYPO3\CMS\Core\Page\PageRenderer;
use TYPO3\CMS\Core\View\ViewInterface;

class GitHubLinkHandler implements LinkHandlerInterface
{
    protected array $linkAttributes = [&#039;target&#039;, &#039;title&#039;, &#039;class&#039;, &#039;params&#039;, &#039;rel&#039;];

    protected array $linkParts = [];

    protected ViewInterface $view;

    protected array $configuration;

    public function __construct(
        // The page renderer is needed to register the JavaScript
        private readonly PageRenderer $pageRenderer,
    ) {
    }

    public function initialize(AbstractLinkBrowserController $linkBrowser, $identifier, array $configuration)
    {
        $this-&gt;configuration = $configuration;
    }

    public function setView(ViewInterface $view): void
    {
        $this-&gt;view = $view;
    }
}</code></pre>

            <p>For technical reasons, not all dependencies needed by the backend link handler can
be acquired by DependencyInjection. Therefore the following two methods
are called by Core classes once the dependencies are available:</p>
            <p>LinkHandlerInterface::initialize() takes care of setting the
\TYPO3\CMS\Backend\Controller\AbstractLinkBrowserController, the identifier and
the configuration information. In this example we only need the configuration,
the other parameters might be needed in different scenarios.</p>
            <dl>
                        <dt>AbstractLinkBrowserController $linkBrowser</dt>
        
        <dd>Is the surrounding class calling the link handler. This class stores
configuration information of the complete link browser window.</dd>                        <dt>string $identifier</dt>
        
        <dd>Contains the key of the page TSconfig configuration of the link browser tab
this instance renders.</dd>                        <dt>array $configuration</dt>
        
        <dd>Contains the page TSconfig configuration as array of the link browser tab
this instance renders.</dd>    </dl>
            <p>The method setView() is called by the AbstractLinkBrowserController
once the view is available and contains the necessary information to render
the link browser window.</p>
            <div class="phpdocumentor-admonition -note">
            <svg class="phpdocumentor-admonition__icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"></path></svg>
                    <article>
        <p>setView() is not part of the LinkHandlerInterface
and its call is an implementation detail that might be
changed in the future.</p>

    </article>
</div>
    </div>
            <div class="section" id="enable-dependency-injection">
    <h2>Enable dependency injection</h2>
            <p>Backend link handlers are called internally in the TYPO3 Core by
GeneralUtility::makeInstance(). Therefore dependency injection needs
to be enabled by marking the class as public in the extension&#039;s
Configuration/Services.yaml. As we keep internal states in the link
handler class (for example $linkParts) it cannot be a singleton and must
be marked as shared: false:</p>
            <p>:caption: <a href="EXT:examples/Configuration/Services.yaml">EXT:examples/Configuration/Services.yaml</a></p>
            <a id="tutorial_backend_link_handler_render"></a>
    </div>
            <div class="section" id="render-the-link-browser-tab">
    <h2>Render the link browser tab</h2>
            <p>The method LinkHandlerInterface::render() is called when the tab should
be rendered. It registers the required JavaScript in the page renderer, assigns
variables to the view and returns the rendered HTML.</p>
            <pre><code class="language-php">use Psr\Http\Message\ServerRequestInterface;

class GitHubLinkHandler implements LinkHandlerInterface
{
    public function render(ServerRequestInterface $request): string
    {
        $this-&gt;pageRenderer-&gt;loadJavaScriptModule(&#039;@t3docs/examples/github_link_handler.js&#039;);
        $this-&gt;view-&gt;assign(&#039;project&#039;, $this-&gt;configuration[&#039;project&#039;]);
        $this-&gt;view-&gt;assign(&#039;action&#039;, $this-&gt;configuration[&#039;action&#039;]);
        $this-&gt;view-&gt;assign(&#039;linkParts&#039;, $this-&gt;linkParts);
        $this-&gt;view-&gt;assign(&#039;issue&#039;, $this-&gt;linkParts[&#039;issue&#039;] ?? &#039;&#039;);

        return $this-&gt;view-&gt;render(&#039;LinkBrowser/GitHub&#039;);
    }
}</code></pre>

            <a id="tutorial_backend_link_handler_javascript"></a>
    </div>
            <div class="section" id="set-the-link-via-javascript">
    <h2>Set the link via JavaScript</h2>
            <p>When the button in the rendered form is clicked to set a link, a custom
JavaScript class interprets the form data and creates the link to be stored:</p>
            <pre><code class="language-js">/*
 * This file is part of the TYPO3 CMS project.
 *
 * It is free software; you can redistribute it and/or modify it under
 * the terms of the GNU General Public License, either version 2
 * of the License, or any later version.
 *
 * For the full copyright and license information, please read the
 * LICENSE.txt file that was distributed with this source code.
 *
 * The TYPO3 project - inspiring people to share!
 */

import LinkBrowser
	from &quot;@typo3/backend/link-browser.js&quot;;

/**
 * Module: @t3docs/examples/github_link_handler.js
 * Github issue link interaction
 */

class GitHubLinkHandler {
	constructor() {
		var form_el = document.getElementById(&quot;lgithubform&quot;);
		form_el.addEventListener(&quot;submit&quot;, function(event) {
			event.preventDefault();
			var value = document.getElementById(&#039;lgithub&#039;).value;
			if (value === &#039;t3://github?issue=&#039;) {
				return;
			}
			if (value.indexOf(&#039;t3://github?issue=&#039;) === 0) {
				value = value.substring(18);
			}
			LinkBrowser.finalizeFunction(&#039;t3://github?issue=&#039; + value);
		});
	}
}

export default new GitHubLinkHandler();</code></pre>

            <p>It is important that the JavaScript function calls
LinkBrowser.finalizeFunction(). Otherwise no link will be set.</p>
            <p>If not done yet, the JavaScript has to be registered in the file
EXT:my_extension/Configuration/JavaScriptModules.php. Otherwise it
will not be found by $pageRenderer-loadJavaScriptModule().</p>
            <p>:caption: <a href="EXT:examples/Configuration/JavaScriptModules.php">EXT:examples/Configuration/JavaScriptModules.php</a></p>
            <p>As our JavaScript class depends on classes provided by the backend system extension,
backend has to be added as dependency. See also
backend-javascript-es6-loading.</p>
            <a id="tutorial_backend_link_handler_canHandleLink"></a>
    </div>
            <div class="section" id="can-we-handle-this-link">
    <h2>Can we handle this link?</h2>
            <p>The method LinkHandlerInterface::canHandleLink() is called when the
user edits an existing link in the link browser. All backend link handlers will
be called and can decide if they can handle that link. If so, they should store
the provided information to be used in rendering (for example, to fill an input
field with the old value).</p>
            <pre><code class="language-php">class GitHubLinkHandler implements LinkHandlerInterface
{
    public function canHandleLink(array $linkParts): bool
    {
        if ($linkParts[&#039;type&#039;] !== &#039;github&#039;) {
            return false;
        }
        $this-&gt;linkParts = $linkParts[&#039;url&#039;]??[];
        return true;
    }
}</code></pre>

            <a id="tutorial_backend_link_handler_formatCurrentUrl"></a>
    </div>
            <div class="section" id="format-current-url">
    <h2>Format current URL</h2>
            <p>The function LinkHandlerInterface::formatCurrentUrl() is used to preview
what the link will look like in the backend, for example, in the upper part of
the link browser window.</p>
            <dl>
                        <dt>LinkHandlerInterface::formatCurrentUrl() is not used to render the</dt>
        
        <dd>link in the frontend.</dd>    </dl>
    </div>
    </div>
<div class="section" id="3-introduce-the-custom-link-format">
    <h1>3. Introduce the custom link format</h1>
            <p>You can find the complete class in the extension <a href="EXT:examples">EXT:examples</a> on GitHub:
<a href="https://github.com/TYPO3-Documentation/t3docs-examples/blob/main/Classes/LinkHandler/GitHubLinkHandling.php">GitHubLinkHandling</a>.</p>
            <p>Our backend link handler implementation from step 1
saves the link in the custom format t3://github?issue=123 via JavaScript.</p>
            <p>This format is only an arbitrary string until we tell TYPO3 how to handle links
of the new format by a second class which implements the
TYPO3\CMS\Core\LinkHandling\LinkHandlingInterface.</p>
            <div class="phpdocumentor-admonition -note">
            <svg class="phpdocumentor-admonition__icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"></path></svg>
                    <article>
        <p>There are two interfaces with very similar names and very different
functionality involved here. The
\TYPO3\CMS\Backend\LinkHandler\LinkHandlerInterface renders a tab in
the link browser window in the backend. Its implementing class is commonly
called a &quot;(backend) link handler&quot;. Classes implementing the interface
TYPO3\CMS\Core\LinkHandling\LinkHandlingInterface handle the
introduced link format. Such a class is called a &quot;(core) link handler&quot;.</p>

    </article>
</div>
            <pre><code class="language-php">/**
 * Resolves GitHub Links
 */
class GitHubLinkHandling implements LinkHandlingInterface
{
    protected $baseUrn = &#039;t3://github&#039;;

    public function asString(array $parameters): string
    {
        $githubIssue = (int)$parameters[&#039;issue&#039;];
        return $this-&gt;baseUrn . &#039;?issue=&#039; . $githubIssue;
    }

    public function resolveHandlerData(array $data): array
    {
        return [
            &#039;issue&#039; =&gt; (int)$data[&#039;issue&#039;],
        ];
    }
}</code></pre>

            <p>The method LinkHandlingInterface::asString() creates a string
representation from the parameter array.</p>
            <p>LinkHandlingInterface::resolveHandlerData() receives
the string representation of the link and creates the parameter array from it.
For convenience the parameters are already parsed and stored as key-value pairs
in an array for you. You can perform further processing here if needed.</p>
    </div>
<div class="section" id="4-render-the-custom-link-format-in-the-frontend">
    <h1>4. Render the custom link format in the frontend</h1>
            <p>The link builder, a class extending the abstract class
\TYPO3\CMS\Frontend\Typolink\AbstractTypolinkBuilder is called whenever
a link is rendered in the frontend, for example via
TypoScript .typolink, by the
\TYPO3\CMS\Frontend\ContentObject\ContentObjectRenderer::typoLink
function or by the \TYPO3\CMS\Extbase\Mvc\Web\Routing\UriBuilder.</p>
            <pre><code class="language-php">use TYPO3\CMS\Frontend\Typolink\LinkResult;
use TYPO3\CMS\Frontend\Typolink\LinkResultInterface;
use TYPO3\CMS\Frontend\Typolink\UnableToLinkException;

/**
 * Builds a TypoLink to a Github issue
 */
class GithubLinkBuilder extends AbstractTypolinkBuilder
{
    private const TYPE_GITHUB = &#039;github&#039;;

    public function build(
        array &amp;$linkDetails,
        string $linkText,
        string $target,
        array $conf
    ): LinkResultInterface {
        $issueId = (int)$linkDetails[&#039;issue&#039;];
        if ($issueId &lt; 1) {
            throw new UnableToLinkException(
                &#039;&quot;&#039; . $issueId . &#039;&quot; is not a valid GitHub issue number.&#039;,
                // Use the Unix timestamp of the time of creation of this message
                1665304602,
                null,
                $linkText
            );
        }
        $url = &#039;https://github.com/TYPO3-Documentation/TYPO3CMS-Reference-CoreApi/issues/&#039; . $issueId;

        return (new LinkResult(self::TYPE_GITHUB, $url))
            -&gt;withTarget($target)
            -&gt;withLinkConfiguration($conf)
            -&gt;withLinkText($linkText);
    }
}</code></pre>

            <p>The link builder must be registered in ext_localconf.php, so that
the correct link builder for the new type can be determined by the calling API:</p>
            <pre><code class="language-php">$GLOBALS[&#039;TYPO3_CONF_VARS&#039;][&#039;FE&#039;][&#039;typolinkBuilder&#039;][&#039;github&#039;] =
    \T3docs\Examples\LinkHandler\GithubLinkBuilder::class;</code></pre>
            <p>The function AbstractTypolinkBuilder::build() is called with the link
configuration and data from the typolink function. If the link can be rendered,
it returns a new \TYPO3\CMS\Frontend\Typolink\LinkResultInterface. The
actual rendering of the link depends on the context the link is rendered in
(for example HTML or JSON).</p>
            <p>If the link cannot be built it should throw a
\TYPO3\CMS\Frontend\Typolink\UnableToLinkException.</p>
            <dl>
                        <dt>configuration &lt;tutorial_backend_link_handler-tsconfig&gt;` (step 1)</dt>
        
        <dd>is <strong>not available in the frontend</strong>. Therefore the information which
repository to use must be stored in another way. In this example we
hardcoded it. But you could also make it available by TypoScript
setup or as part of the link format that is saved.</dd>    </dl>
    </div>

    </section>
                            </div>
            <section data-search-results class="phpdocumentor-search-results phpdocumentor-search-results--hidden">
    <section class="phpdocumentor-search-results__dialog">
        <header class="phpdocumentor-search-results__header">
            <h2 class="phpdocumentor-search-results__title">Search results</h2>
            <button class="phpdocumentor-search-results__close"><i class="fas fa-times"></i></button>
        </header>
        <section class="phpdocumentor-search-results__body">
            <ul class="phpdocumentor-search-results__entries"></ul>
        </section>
    </section>
</section>
        </div>
        <a href="guide/ApiOverview/LinkHandling/Tutorials/CustomLinkBrowser.html#top" class="phpdocumentor-back-to-top"><i class="fas fa-chevron-circle-up"></i></a>

    </main>

    <script>
        cssVars({});
    </script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/prism.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/plugins/line-numbers/prism-line-numbers.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/plugins/line-highlight/prism-line-highlight.min.js"></script>
</body>
</html>