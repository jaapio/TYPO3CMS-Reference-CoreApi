<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
                    <title>phpDocumentor</title>
    

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <base href="../../">
    <link rel="icon" href="images/favicon.ico"/>
    <link rel="stylesheet" href="css/normalize.css">
    <link rel="stylesheet" href="css/base.css">
            <link rel="preconnect" href="https://fonts.gstatic.com">
        <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@100;200;300;400;600;700&display=swap" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:wght@400;600;700&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="css/template.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.0/css/all.min.css" integrity="sha256-ybRkN9dBjhcS2qrW1z+hfCxq+1aBdwyQM5wlQoQVt/0=" crossorigin="anonymous" />
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/themes/prism-okaidia.css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/plugins/line-numbers/prism-line-numbers.css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/plugins/line-highlight/prism-line-highlight.css">
                <script src="https://cdn.jsdelivr.net/npm/fuse.js@3.4.6"></script>
        <script src="https://cdn.jsdelivr.net/npm/css-vars-ponyfill@2"></script>
        <script src="js/template.js"></script>
        <script src="js/search.js"></script>
        <script defer src="js/searchIndex.js"></script>
    </head>
<body id="top">
    <header class="phpdocumentor-header phpdocumentor-section">
    <h1 class="phpdocumentor-title"><a href="" class="phpdocumentor-title__link">phpDocumentor</a></h1>
    <input class="phpdocumentor-header__menu-button" type="checkbox" id="menu-button" name="menu-button" />
    <label class="phpdocumentor-header__menu-icon" for="menu-button">
        <i class="fas fa-bars"></i>
    </label>
    <section data-search-form class="phpdocumentor-search">
    <label>
        <span class="visually-hidden">Search for</span>
        <svg class="phpdocumentor-search__icon" width="21" height="20" viewBox="0 0 21 20" fill="none" xmlns="http://www.w3.org/2000/svg">
            <circle cx="7.5" cy="7.5" r="6.5" stroke="currentColor" stroke-width="2"/>
            <line x1="12.4892" y1="12.2727" x2="19.1559" y2="18.9393" stroke="currentColor" stroke-width="3"/>
        </svg>
        <input type="search" class="phpdocumentor-field phpdocumentor-search__field" placeholder="Loading .." disabled />
    </label>
</section>

    <nav class="phpdocumentor-topnav">
    <ul class="phpdocumentor-topnav__menu">
        </ul>
</nav>
</header>

    <main class="phpdocumentor">
        <div class="phpdocumentor-section">
            <input class="phpdocumentor-sidebar__menu-button" type="checkbox" id="sidebar-button" name="sidebar-button" />
<label class="phpdocumentor-sidebar__menu-icon" for="sidebar-button">
    Menu
</label>
<aside class="phpdocumentor-column -three phpdocumentor-sidebar">
                    <section class="phpdocumentor-sidebar__category">
            <h2 class="phpdocumentor-sidebar__category-header">typo3-explained</h2>
                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="guide/Introduction/Index.html#introduction" class="">Introduction</a>
</h4>
    <ul class="phpdocumentor-list">
                    <li>
                <a href="guide/Introduction/Index.html#system-overview-1" class="">System Overview</a>
                
            </li>
                    <li>
                <a href="guide/Introduction/Index.html#a-basic-installation" class="">A basic installation</a>
                
            </li>
            </ul>

                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="guide/ApiOverview/Index.html#api-a-z" class="">API A-Z</a>
</h4>

                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="guide/CodingGuidelines/Index.html#cgl" class="">Coding Guidelines</a>
</h4>
    <ul class="phpdocumentor-list">
                    <li>
                <a href="guide/CodingGuidelines/Introduction.html#cgl-introduction" class="">Introduction</a>
                
            </li>
                    <li>
                <a href="guide/CodingGuidelines/CglPhp/Index.html#cgl-php" class="">PHP Coding Guidelines</a>
                
            </li>
                    <li>
                <a href="guide/CodingGuidelines/CglJavaScript/Index.html#cgl-javascript" class="">JavaScript Coding Guidelines</a>
                
            </li>
                    <li>
                <a href="guide/CodingGuidelines/CglTypeScript/Index.html#cgl-typescript" class="">TypeScript Coding Guidelines</a>
                
            </li>
                    <li>
                <a href="guide/CodingGuidelines/CglTypoScript/Index.html#cgl-typoscript" class="">TypoScript Coding Guidelines</a>
                
            </li>
                    <li>
                <a href="guide/CodingGuidelines/CglTsConfig.html#cgl-tsconfig" class="">TSconfig Coding Guidelines</a>
                
            </li>
                    <li>
                <a href="guide/CodingGuidelines/CglXliff/Index.html#cgl-xliff" class="">Xliff Coding Guidelines</a>
                
            </li>
                    <li>
                <a href="guide/CodingGuidelines/CglYaml.html#cgl-yaml" class="">Yaml Coding Guidelines</a>
                
            </li>
                    <li>
                <a href="guide/CodingGuidelines/CglRest/Index.html#cgl-rest" class="">reStructuredText (reST)</a>
                
            </li>
            </ul>

                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="guide/Configuration/Index.html#configuration" class="">Configuration</a>
</h4>
    <ul class="phpdocumentor-list">
                    <li>
                <a href="guide/Configuration/ConfigurationOverview.html#config-overview" class="">Configuration overview</a>
                
            </li>
                    <li>
                <a href="guide/Configuration/Glossary.html#configuration-classification" class="">Glossary</a>
                
            </li>
                    <li>
                <a href="guide/Configuration/ConfigurationFiles.html#configuration-files" class="">Configuration files</a>
                
            </li>
                    <li>
                <a href="guide/Configuration/ConfigurationModule/Index.html#configuration-module" class="">Configuration module</a>
                
            </li>
                    <li>
                <a href="guide/Configuration/FeatureToggles.html#feature-toggles" class="">Feature toggles</a>
                
            </li>
                    <li>
                <a href="guide/Configuration/GlobalVariables.html#globals-variables" class="">$GLOBALS</a>
                
            </li>
                    <li>
                <a href="guide/Configuration/Typo3ConfVars/Index.html#typo3-conf-vars" class="">TYPO3_CONF_VARS</a>
                
            </li>
                    <li>
                <a href="guide/Configuration/Typo3Information.html#typo3Information" class="">Global meta information about TYPO3</a>
                
            </li>
                    <li>
                <a href="guide/Configuration/Tsconfig.html#tsconfig" class="">TSconfig</a>
                
            </li>
                    <li>
                <a href="guide/Configuration/TypoScriptSyntax/Index.html#typoscript-syntax-about" class="">TypoScript syntax</a>
                
            </li>
                    <li>
                <a href="guide/Configuration/UserSettingsConfiguration/Index.html#user-settings" class="">User settings configuration</a>
                
            </li>
                    <li>
                <a href="guide/Configuration/Yaml/Index.html#yaml" class="">YAML</a>
                
            </li>
            </ul>

                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="guide/ExtensionArchitecture/Index.html#extension-development" class="">Extension development</a>
</h4>
    <ul class="phpdocumentor-list">
                    <li>
                <a href="guide/ExtensionArchitecture/Concepts/Index.html#extension-concepts" class="">Concepts</a>
                
            </li>
                    <li>
                <a href="guide/ExtensionArchitecture/FileStructure/Index.html#extension-reserved-folders-legacy" class="">File structure</a>
                
            </li>
                    <li>
                <a href="guide/ExtensionArchitecture/HowTo/Index.html#extension-howto" class="">Howto</a>
                
            </li>
                    <li>
                <a href="guide/ExtensionArchitecture/Extbase/Index.html#extbase" class="">Extbase</a>
                
            </li>
                    <li>
                <a href="guide/ExtensionArchitecture/BestPractises/Index.html#extension-Best-practises" class="">Best practises and conventions</a>
                
            </li>
                    <li>
                <a href="guide/ExtensionArchitecture/Tutorials/Index.html#extension-tutorials" class="">Tutorials</a>
                
            </li>
            </ul>

                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="guide/Security/Index.html#security" class="">Security guidelines</a>
</h4>
    <ul class="phpdocumentor-list">
                    <li>
                <a href="guide/Security/Introduction/Index.html#security-introduction" class="">Introduction</a>
                
            </li>
                    <li>
                <a href="guide/Security/SecurityTeam/Index.html#security-team" class="">The TYPO3 Security Team</a>
                
            </li>
                    <li>
                <a href="guide/Security/GeneralInformation/Index.html#security-general-information" class="">General Information</a>
                
            </li>
                    <li>
                <a href="guide/Security/TypesOfThreats/Index.html#security-threats" class="">Types of Security Threats</a>
                
            </li>
                    <li>
                <a href="guide/Security/GeneralGuidelines/Index.html#security-general-guidelines" class="">General guidelines</a>
                
            </li>
                    <li>
                <a href="guide/Security/GuidelinesAdministrators/Index.html#security-administrators" class="">Guidelines for System Administrators</a>
                
            </li>
                    <li>
                <a href="guide/Security/GuidelinesExtensionDevelopment/Index.html#security-extension-development" class="">Guidelines for extension development</a>
                
            </li>
                    <li>
                <a href="guide/Security/GuidelinesIntegrators/Index.html#security-integrators" class="">Guidelines for TYPO3 integrators</a>
                
            </li>
                    <li>
                <a href="guide/Security/GuidelinesEditors/Index.html#security-editors" class="">Guidelines for editors</a>
                
            </li>
                    <li>
                <a href="guide/Security/Backups/Index.html#security-backups" class="">Backup strategy</a>
                
            </li>
                    <li>
                <a href="guide/Security/HackedSite/Index.html#security-detect-analyze-repair" class="">Detect, analyze and repair a hacked site</a>
                
            </li>
            </ul>

                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="guide/Testing/Index.html#testing" class="">Testing</a>
</h4>
    <ul class="phpdocumentor-list">
                    <li>
                <a href="guide/Testing/History.html#testing-history" class="">History</a>
                
            </li>
                    <li>
                <a href="guide/Testing/CoreTesting.html#testing-core" class="">Core testing</a>
                
            </li>
                    <li>
                <a href="guide/Testing/ExtensionTesting.html#testing-extensions" class="">Extension testing</a>
                
            </li>
                    <li>
                <a href="guide/Testing/ProjectTesting.html#testing-projects" class="">Project testing</a>
                
            </li>
                    <li>
                <a href="guide/Testing/WritingUnit.html#testing-writing-unit" class="">Writing unit tests</a>
                
            </li>
                    <li>
                <a href="guide/Testing/WritingFunctional.html#testing-writing-functional" class="">Writing functional tests</a>
                
            </li>
                    <li>
                <a href="guide/Testing/WritingAcceptance.html#testing-writing-acceptance" class="">Writing acceptance tests</a>
                
            </li>
                    <li>
                <a href="guide/Testing/Faq.html#testing-faq" class="">FAQ</a>
                
            </li>
            </ul>

                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="guide/About.html#about" class="">About This Manual</a>
</h4>
    <ul class="phpdocumentor-list">
                    <li>
                <a href="guide/About.html#intended-audience" class="">Intended Audience</a>
                
            </li>
                    <li>
                <a href="guide/About.html#code-examples-1" class="">Code examples</a>
                
            </li>
                    <li>
                <a href="guide/About.html#feedback-and-contribute" class="">Feedback and Contribute</a>
                
            </li>
                    <li>
                <a href="guide/About.html#credits-1" class="">Credits</a>
                
            </li>
                    <li>
                <a href="guide/About.html#dedication-1" class="">Dedication</a>
                
            </li>
            </ul>

                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="guide/Sitemap.html#sitemap" class="">Sitemap</a>
</h4>

                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="guide/genindex.html#index" class="">Index</a>
</h4>

                        </section>
            
    <section class="phpdocumentor-sidebar__category">
        <h2 class="phpdocumentor-sidebar__category-header">Reports</h2>
                <h3 class="phpdocumentor-sidebar__root-package"><a href="reports/deprecated.html">Deprecated</a></h3>
        <h3 class="phpdocumentor-sidebar__root-package"><a href="reports/errors.html">Errors</a></h3>
        <h3 class="phpdocumentor-sidebar__root-package"><a href="reports/markers.html">Markers</a></h3>
    </section>

    <section class="phpdocumentor-sidebar__category">
        <h2 class="phpdocumentor-sidebar__category-header">Indices</h2>
        <h3 class="phpdocumentor-sidebar__root-package"><a href="indices/files.html">Files</a></h3>
    </section>
</aside>

            <div class="phpdocumentor-column -nine phpdocumentor-content">
                                        <section>
        
<div class="section" id="testing-faq">
    <h1>FAQ</h1>
    </div>
<div class="section" id="introduction">
    <h1>Introduction</h1>
            <p>The Core took some decisions regarding testing that may not be obvious at first sight. This
chapter tries to answer some of the most frequent asked ones.</p>
    </div>
<div class="section" id="why-do-you-docker-everything">
    <h1>Why do you docker everything?</h1>
            <p>Executing tests in a containerized environment like docker has significant advantages over
local execution. It takes away all the demanding setup needs of additional services like
selenium, various database systems, different php versions in parallel on the same system and
so on. It also creates a well defined environment that is identical for everyone: Extension
authors rely on the same system dependencies as the Core does, local test execution is identical
to what the continuous integration system bamboo does. All dependencies and setup details are open
sourced and available for everyone. Even Travis CI is forced to create the exact same environment
in our examples, and it plays well with other dockerized solutions like <a href="https://www.drud.com/">ddev</a>.
In short: Using docker creates stable an easy to replay results.</p>
    </div>
<div class="section" id="docker-consumes-too-much-hard-disk">
    <h1>Docker consumes too much hard disk</h1>
            <p>Yes. If using docker often and in various scenarios, it does not tend to be exactly economical
when it comes to hard disk consumption. There are various maintenance commands that help, though:
First, runTests.sh -u updates local typo3gmbh containers and removes old ones. This may help.
Additionally, it is a good idea to check which local containers exist using docker images and
remove obsolete ones once in a while using docker rmi. Also, some container setups tend to create
many docker volumes and don&#039;t remove them after use. The command docker volume list gives an overview,
and a (use with care, you have a backup right?) docker volume prune helps removing unused volumes.</p>
    </div>
<div class="section" id="why-do-you-need-runtests-sh">
    <h1>Why do you need runTests.sh?</h1>
            <p>The script runTests.sh is a wrapper around docker-compose. While docker and docker-compose are
great software, this stack has its own type of issues. In the end, runTests.sh just creates a .env
file read by docker-compose to work around a couple of things. For instance, all tests mount the
local git checkout of Core or an extension into one or multiple containers. Executing tests then
may write files to that volume. These files should be written with the same local user that starts
the tests, otherwise local files are created with permissions a local user may not be able to delete again.
Specifying the user that runs a container is however not possible in docker directly and a <a href="https://github.com/docker/compose/issues/2380">long standing issue</a> about that is still not resolved. There are further
issues which runTests.sh hides away. The goal was to have a dead simple mechanism to
execute tests. runTests.sh does that.</p>
            <p>Additionally, wrapping details in runTests.sh gives the Core the opportunity to change docker-compose
details without affecting the outer caller API: We can change things on docker level, adapt the script
and nothing changes on the consuming side. This detail is pretty convenient since it reduces the
risk of breaking consuming scripts like other CI systems.</p>
    </div>
<div class="section" id="is-a-generic-runtests-sh-available">
    <h1>Is a generic runTests.sh available?</h1>
            <p>No. Maybe later. The script runTests.sh is pretty young. It did not mature enough to make it generally
available for example within the <a href="https://github.com/TYPO3/testing-framework">typo3/testing-framework</a>
to be used by extensions directly. At the moment each extension should maintain its own copy of
runTests.sh and docker-compose.yml files on its own and adapt it to its extension
specific needs. We&#039;ll see how this evolves and maybe deliver some more generic solution later.</p>
    </div>
<div class="section" id="why-don-t-you-use-runtests-sh-in-bamboo">
    <h1>Why don&#039;t you use runTests.sh in bamboo?</h1>
            <p>For TYPO3 Core testing, bamboo has its own specification in Build/bamboo/src/main/java/core/PreMergeSpec.java
(and a similar nightly setup in Build/bamboo/src/main/java/core/NightlySpec.java) and uses
an own docker-compose file in Build/testing-docker/bamboo/docker-compose.yml. The main reason
for that is the bamboo agents are not local processes on the given hardware directly, but are also
executed in docker containers to have many of them in parallel on one host.</p>
            <p>The bamboo agents are &quot;stupid&quot; and only contain the java agent but don&#039;t know about PHP versions or
further services. To execute single test jobs, they start new &quot;sibling&quot; containers and call commands in them.
For instance, they start an ad hoc postgres, a redis and a memcached container, then start a PHP 7.3 container
assigned to the same network and run the functional test suite. With multiple agents on one host (to make good
use of many CPU&#039;s on one hardware system), these per-agent specific ad-hoc networks and volume mounts need to be
separated from each other. This requires some additional setup efforts runTests.sh does not reflect. Additionally,
the ram disk, responsible shell user and home directory setup is different to speed up single runs and to
efficiently cache network related stuff on the local host filesystem without agents colliding with each other.</p>
            <p>So while bamboo and local test execution use the same underlying containers, the network, local cache and volume
mounts are different and this forces us to separate that from the local &quot;one thing at a time&quot; tailored script called
runTests.sh.</p>
    </div>
<div class="section" id="why-do-you-not-use-native-php-on-travis-ci">
    <h1>Why do you not use native PHP on Travis CI?</h1>
            <p>The documentation about extension and project testing using Travis CI sets up an environment that
is identical to the local testing with the same containers used locally. This circumvents
the PHP versions that Travis comes with and again runs everything in docker containers. It would
also possible be to use the native Travis environments. This however requires additional
fiddling and more knowledge of the testing internals, especially when it comes to functional and
acceptance testing. Extension authors may very well decide to do that, but a setup like that is
out of scope of this document. Torturing Travis CI to fetch and run the docker containers all the
time is more time consuming but simplifies the setup a lot. And it gives stable results: If it fails
on Travis, it will fail locally, too.</p>
    </div>
<div class="section" id="functional-tests-set-up-own-instances-in-typo3temp">
    <h1>Functional tests set up own instances in typo3temp?</h1>
            <p>Yes. This is how it works. The functional (and acceptance) bootstrap create new, isolated instances
within your project root&#039;s public directory (usually .Build/Web) in typo3temp/var/tests
for each execution. Maybe later we make this path configurable and locate it elsewhere, but for the
time being it is how it is.</p>
    </div>
<div class="section" id="can-i-provide-more-hardware-for-bamboo">
    <h1>Can I provide more hardware for bamboo?</h1>
            <p>Yes and no. We indeed consume quite some hardware to keep the TYPO3 Core  testing at a decent speed
and we are always looking for more. Under normal operation, we currently consume 64 CPU&#039;s and
half a terabyte of RAM. This is something. However, it is not trivial to help us: With the current
system, we need root access to the host, a host needs 8 hardware CPU&#039;s with 64 GB of RAM, the
system needs to be stable and always available, it needs to be wired into the TYPO3 GmbH internal
VPN, we need a decent network connection and we need to trust the system. You probably do not
want to load systems like that with additional tasks since the system load can grow quite high if the
agent cluster is busy. If you can comply with this, please mail to the TYPO3 GmbH for details, it is highly appreciated! In the future our system demands may
hopefully shrink, maybe we&#039;re able to establish more dynamic scaling using kubernetes for instance, but
we&#039;re not there yet.</p>
    </div>
<div class="section" id="testing-is-slow-on-macos">
    <h1>Testing is slow on macOS</h1>
            <p>Yes. macOS has issues at least in this area. We&#039;re sorry. It is how it is. There are various
issues that have not been solved in a satisfiable way when it comes to mounting bigger local
directories as docker container volumes. github is full of issues with mac users complaining
about poor docker performance. There may be some tricks to speed that up in our tiny TYPO3
testing world and we&#039;re open to persons having a look at this to reduce pain for mac users.
Other than that, there is little we can do. Eventually, maybe macOS gets its name spacing,
file system layers and containerization right in the future? Windows is better and quicker in
this area by now. Let that sink in. Please keep us posted.</p>
    </div>
<div class="section" id="can-i-run-tests-with-windows">
    <h1>Can i run tests with Windows?</h1>
            <p>Well. Maybe. We&#039;ve had some successful reports using runTests.sh with <a href="https://docs.microsoft.com/en-us/windows/wsl/install-win10">WSL: Windows Subsystem for Linux</a> but we did not get too much information
and experience on this, yet. Please go ahead, push patches for Core runTests.sh or the docker-compose.yml
files and improve this documentation with hints about Windows. We already know there are some details
to take care of, a starter can be found in a Core patch commit message&gt;`.</p>
    </div>

    </section>
                            </div>
            <section data-search-results class="phpdocumentor-search-results phpdocumentor-search-results--hidden">
    <section class="phpdocumentor-search-results__dialog">
        <header class="phpdocumentor-search-results__header">
            <h2 class="phpdocumentor-search-results__title">Search results</h2>
            <button class="phpdocumentor-search-results__close"><i class="fas fa-times"></i></button>
        </header>
        <section class="phpdocumentor-search-results__body">
            <ul class="phpdocumentor-search-results__entries"></ul>
        </section>
    </section>
</section>
        </div>
        <a href="guide/Testing/Faq.html#top" class="phpdocumentor-back-to-top"><i class="fas fa-chevron-circle-up"></i></a>

    </main>

    <script>
        cssVars({});
    </script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/prism.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/plugins/line-numbers/prism-line-numbers.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/plugins/line-highlight/prism-line-highlight.min.js"></script>
</body>
</html>